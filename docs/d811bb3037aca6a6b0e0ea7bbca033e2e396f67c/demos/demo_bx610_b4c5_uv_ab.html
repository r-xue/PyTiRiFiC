

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Example BX610: perform model fitting using method=‘amoeba’ for the Band 4 Cycle 5 DataSet &mdash; GMaKE 0.2.dev1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="/Users/Rui/Documents/Workspace/projects/GMaKE/docs/source/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Example BX610: perform model fitting using method=‘amoeba’ for the Band 6 Cycle 3 DataSet" href="demo_bx610_b6c3_uv_ab.html" />
    <link rel="prev" title="Example BX610: perform model fitting using method=‘amoeba’ for the Band 4 Cycle 2 DataSet" href="demo_bx610_b4c2_uv_ab.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> GMaKE
          

          
          </a>

          
            
            
              <div class="version">
                0.2.dev1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../par_def.html">Input File Format</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="demo_gn20_prep.html">Example: GN20 (z~4 SMF) : Data Prep</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_gn20_imaging.html">Example GN20: perform imaging of CO 2-1 dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_prep.html">Example: BX610 (High-z SFG) : Data Prep</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_imaging.html">Example: BX610 (High-z SFG) : Data Imaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_display.html">Example: BX610 (High-z SFG) : Examine Moment0 + 1D Spectrum</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_b4c2_uv_ab.html">Example BX610: perform model fitting using method=‘amoeba’ for the Band 4 Cycle 2 DataSet</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Example BX610: perform model fitting using method=‘amoeba’ for the Band 4 Cycle 5 DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_b6c3_uv_ab.html">Example BX610: perform model fitting using method=‘amoeba’ for the Band 6 Cycle 3 DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_model_1dspec.html">Invert Visibility + Plot 1D spectra (may take a while)</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_emcee.html">Example BX610: perform model fitting using method=‘emcee’</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_hxmm01_prep.html">Example: HXMM01 (High-z Merger)</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_hxmm01_simulate.html">Example HXMM01: test the MS-simulation modules</a></li>
</ul>
<p class="caption"><span class="caption-text">Tests</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tests/test_uvsample_performance.html">Test the performance of the Image-to-MS-related modules</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMaKE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Example BX610: perform model fitting using method=‘amoeba’ for the Band 4 Cycle 5 DataSet</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p><a class="reference external" href="https://colab.research.google.com/github/r-xue/casa_proc/blob/master/demo/test_casaproc.ipynb"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></a></p>
<div class="section" id="example-bx610-perform-model-fitting-using-method-amoeba-for-the-band-4-cycle-5-dataset">
<h1>Example BX610: perform model fitting using method=‘amoeba’ for the Band 4 Cycle 5 DataSet<a class="headerlink" href="#example-bx610-perform-model-fitting-using-method-amoeba-for-the-band-4-cycle-5-dataset" title="Permalink to this headline">¶</a></h1>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import sys
import glob
import os
import io
import logging
from pprint import pprint

print(sys.version)

import socket
if  &#39;hypersion&#39; or &#39;mini&#39; in socket.gethostname() :
    os.chdir(&#39;/Users/Rui/Documents/Workspace/projects/GMaKE/examples/output/&#39;)
print(socket.gethostname())
print(os.getcwd())

import gmake
print(gmake.__version__)
print(gmake.__email__)
print(gmake.__demo__)

inpfile=gmake.__demo__+&#39;/../examples/inpfile/bx610_b4c5_uv_ab.inp&#39;
logfile=&#39;&#39;

#gmake.logger_config()
#gmake.logger_status()
#import pprint
#pprint.pprint(logging.Logger.manager.loggerDict)
gmake.logger_config()
inp_dct=gmake.read_inp(inpfile)
inp_dct=gmake.inp_validate(inp_dct)

outdir=inp_dct[&#39;general&#39;][&#39;outdir&#39;]
gmake.logger_config(logfile=outdir+&#39;/gmake.log&#39;,loglevel=&#39;DEBUG&#39;,logfilelevel=&#39;DEBUG&#39;)
gmake.logger_status()

%reload_ext line_profiler
%reload_ext memory_profiler
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">3.7</span><span class="o">.</span><span class="mi">5</span> <span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="n">Oct</span> <span class="mi">19</span> <span class="mi">2019</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">26</span><span class="p">)</span>
<span class="p">[</span><span class="n">Clang</span> <span class="mf">11.0</span><span class="o">.</span><span class="mi">0</span> <span class="p">(</span><span class="n">clang</span><span class="o">-</span><span class="mf">1100.0</span><span class="o">.</span><span class="mf">33.8</span><span class="p">)]</span>
<span class="n">hyperion</span>
<span class="o">/</span><span class="n">Volumes</span><span class="o">/</span><span class="n">S1</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">output</span>
<span class="mf">0.2</span><span class="o">.</span><span class="n">dev1</span>
<span class="n">rx</span><span class="o">.</span><span class="n">astro</span><span class="nd">@gmail</span><span class="o">.</span><span class="n">com</span>
<span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">gmake</span>
<span class="o">&lt;</span><span class="n">Logger</span> <span class="n">gmake</span> <span class="p">(</span><span class="n">DEBUG</span><span class="p">)</span><span class="o">&gt;</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">FileHandler</span> <span class="o">/</span><span class="n">Volumes</span><span class="o">/</span><span class="n">S1</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">output</span><span class="o">/</span><span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">gmake</span><span class="o">.</span><span class="n">log</span> <span class="p">(</span><span class="n">DEBUG</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">StreamHandler</span> <span class="n">stderr</span> <span class="p">(</span><span class="n">DEBUG</span><span class="p">)</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>#%time dat_dct=gmake.read_data(inp_dct,fill_mask=True,fill_error=True)
#%prun dat_dct=gmake.read_data(inp_dct,fill_mask=True,fill_error=True)
#%lprun -f gmake.read_data dat_dct=gmake.read_data(inp_dct,fill_mask=True,fill_error=True)
#del dat_dct
#%memit dat_dct=gmake.read_data(inp_dct)
#%mprun -f gmake.read_data dat_dct=gmake.read_data(inp_dct)
dat_dct=gmake.read_data(inp_dct)
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">read</span> <span class="n">data</span> <span class="p">(</span><span class="n">may</span> <span class="n">take</span> <span class="n">some</span> <span class="n">time</span><span class="o">..</span><span class="p">)</span>

<span class="n">Read</span><span class="p">:</span> <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>

<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>            <span class="n">complex64</span>       <span class="p">(</span><span class="mi">275794</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>        <span class="mi">269</span> <span class="n">MiB</span>
<span class="n">uvw</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>             <span class="n">float32</span>         <span class="p">(</span><span class="mi">275794</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>            <span class="mi">3</span> <span class="n">MiB</span>
<span class="n">weight</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>          <span class="n">float32</span>         <span class="p">(</span><span class="mi">275794</span><span class="p">,)</span>              <span class="mi">1</span> <span class="n">MiB</span>
  <span class="o">&gt;&gt;</span><span class="n">percentiles</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="o">%</span><span class="p">:</span> <span class="p">[</span> <span class="mf">39.59812164</span> <span class="mf">185.1169751</span>  <span class="mf">253.05403137</span> <span class="mf">324.3769751</span>  <span class="mf">594.16479492</span><span class="p">]</span>
<span class="n">chanfreq</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>        <span class="p">(</span><span class="mi">128</span><span class="p">,)</span>     <span class="mf">143301022036.5513</span> <span class="n">Hz</span> <span class="mf">143797143423.9031</span> <span class="n">Hz</span>
<span class="n">chanwidth</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>       <span class="p">(</span><span class="mi">128</span><span class="p">,)</span>     <span class="o">-</span><span class="mf">3906467.6169</span> <span class="n">Hz</span> <span class="o">-</span><span class="mf">3906467.6169</span> <span class="n">Hz</span>
<span class="n">phasecenter</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>     <span class="mi">23</span><span class="n">h46m09</span><span class="o">.</span><span class="mi">438</span><span class="n">s</span>  <span class="mi">12</span><span class="n">d49m19</span><span class="o">.</span><span class="mi">25</span><span class="n">s</span>

<span class="n">Read</span><span class="p">:</span> <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>

<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>            <span class="n">complex64</span>       <span class="p">(</span><span class="mi">276124</span><span class="p">,</span> <span class="mi">179</span><span class="p">)</span>        <span class="mi">377</span> <span class="n">MiB</span>
<span class="n">uvw</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>             <span class="n">float32</span>         <span class="p">(</span><span class="mi">276124</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>            <span class="mi">3</span> <span class="n">MiB</span>
<span class="n">weight</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>          <span class="n">float32</span>         <span class="p">(</span><span class="mi">276124</span><span class="p">,)</span>              <span class="mi">1</span> <span class="n">MiB</span>
  <span class="o">&gt;&gt;</span><span class="n">percentiles</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="o">%</span><span class="p">:</span> <span class="p">[</span> <span class="mf">36.37529755</span> <span class="mf">156.95782593</span> <span class="mf">215.15796661</span> <span class="mf">281.27739258</span> <span class="mf">531.50854492</span><span class="p">]</span>
<span class="n">chanfreq</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>        <span class="p">(</span><span class="mi">179</span><span class="p">,)</span>     <span class="mf">153003656218.1177</span> <span class="n">Hz</span> <span class="mf">153699007453.9771</span> <span class="n">Hz</span>
<span class="n">chanwidth</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>       <span class="p">(</span><span class="mi">179</span><span class="p">,)</span>     <span class="mf">3906467.6172</span> <span class="n">Hz</span> <span class="mf">3906467.6172</span> <span class="n">Hz</span>
<span class="n">phasecenter</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>     <span class="mi">23</span><span class="n">h46m09</span><span class="o">.</span><span class="mi">438</span><span class="n">s</span>  <span class="mi">12</span><span class="n">d49m19</span><span class="o">.</span><span class="mi">25</span><span class="n">s</span>

<span class="n">Read</span><span class="p">:</span> <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>

<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>            <span class="n">complex64</span>       <span class="p">(</span><span class="mi">275794</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>            <span class="mi">2</span> <span class="n">MiB</span>
<span class="n">uvw</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>             <span class="n">float32</span>         <span class="p">(</span><span class="mi">275794</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>            <span class="mi">3</span> <span class="n">MiB</span>
<span class="n">weight</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>          <span class="n">float32</span>         <span class="p">(</span><span class="mi">275794</span><span class="p">,)</span>              <span class="mi">1</span> <span class="n">MiB</span>
  <span class="o">&gt;&gt;</span><span class="n">percentiles</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="o">%</span><span class="p">:</span> <span class="p">[</span>  <span class="mf">6731.69726562</span>  <span class="mf">31469.71625</span>     <span class="mf">43019.20117188</span>  <span class="mf">55143.775</span>
 <span class="mf">101009.09375</span>   <span class="p">]</span>
<span class="n">chanfreq</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>        <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>       <span class="mf">142967019055.3026</span> <span class="n">Hz</span> <span class="mf">142967019055.3026</span> <span class="n">Hz</span>
<span class="n">chanwidth</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>       <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>       <span class="o">-</span><span class="mf">664099494.8804</span> <span class="n">Hz</span> <span class="o">-</span><span class="mf">664099494.8804</span> <span class="n">Hz</span>
<span class="n">phasecenter</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>     <span class="mi">23</span><span class="n">h46m09</span><span class="o">.</span><span class="mi">438</span><span class="n">s</span>  <span class="mi">12</span><span class="n">d49m19</span><span class="o">.</span><span class="mi">25</span><span class="n">s</span>

<span class="n">Read</span><span class="p">:</span> <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>

<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>            <span class="n">complex64</span>       <span class="p">(</span><span class="mi">275794</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>            <span class="mi">2</span> <span class="n">MiB</span>
<span class="n">uvw</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>             <span class="n">float32</span>         <span class="p">(</span><span class="mi">275794</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>            <span class="mi">3</span> <span class="n">MiB</span>
<span class="n">weight</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>          <span class="n">float32</span>         <span class="p">(</span><span class="mi">275794</span><span class="p">,)</span>              <span class="mi">1</span> <span class="n">MiB</span>
  <span class="o">&gt;&gt;</span><span class="n">percentiles</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="o">%</span><span class="p">:</span> <span class="p">[</span>  <span class="mf">7088.08105469</span>  <span class="mf">33135.7590625</span>   <span class="mf">45296.69335938</span>  <span class="mf">58063.151875</span>
 <span class="mf">106356.640625</span>  <span class="p">]</span>
<span class="n">chanfreq</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>        <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>       <span class="mf">144148725509.4280</span> <span class="n">Hz</span> <span class="mf">144148725509.4280</span> <span class="n">Hz</span>
<span class="n">chanwidth</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>       <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>       <span class="o">-</span><span class="mf">699257703.4329</span> <span class="n">Hz</span> <span class="o">-</span><span class="mf">699257703.4329</span> <span class="n">Hz</span>
<span class="n">phasecenter</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>     <span class="mi">23</span><span class="n">h46m09</span><span class="o">.</span><span class="mi">438</span><span class="n">s</span>  <span class="mi">12</span><span class="n">d49m19</span><span class="o">.</span><span class="mi">25</span><span class="n">s</span>

<span class="n">Read</span><span class="p">:</span> <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>

<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>            <span class="n">complex64</span>       <span class="p">(</span><span class="mi">276124</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>            <span class="mi">2</span> <span class="n">MiB</span>
<span class="n">uvw</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>             <span class="n">float32</span>         <span class="p">(</span><span class="mi">276124</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>            <span class="mi">3</span> <span class="n">MiB</span>
<span class="n">weight</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>          <span class="n">float32</span>         <span class="p">(</span><span class="mi">276124</span><span class="p">,)</span>              <span class="mi">1</span> <span class="n">MiB</span>
  <span class="o">&gt;&gt;</span><span class="n">percentiles</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="o">%</span><span class="p">:</span> <span class="p">[</span> <span class="mf">10749.33203125</span>  <span class="mf">71887.625625</span>   <span class="mf">100576.19921875</span> <span class="mf">129892.62875</span>
 <span class="mf">242941.46875</span>   <span class="p">]</span>
<span class="n">chanfreq</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>        <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>       <span class="mf">141738204024.6475</span> <span class="n">Hz</span> <span class="mf">141738204024.6475</span> <span class="n">Hz</span>
<span class="n">chanwidth</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>       <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>       <span class="o">-</span><span class="mf">1863385053.3984</span> <span class="n">Hz</span> <span class="o">-</span><span class="mf">1863385053.3984</span> <span class="n">Hz</span>
<span class="n">phasecenter</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>     <span class="mi">23</span><span class="n">h46m09</span><span class="o">.</span><span class="mi">438</span><span class="n">s</span>  <span class="mi">12</span><span class="n">d49m19</span><span class="o">.</span><span class="mi">25</span><span class="n">s</span>

<span class="n">Read</span><span class="p">:</span> <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>

<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>            <span class="n">complex64</span>       <span class="p">(</span><span class="mi">276124</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>            <span class="mi">2</span> <span class="n">MiB</span>
<span class="n">uvw</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>             <span class="n">float32</span>         <span class="p">(</span><span class="mi">276124</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>            <span class="mi">3</span> <span class="n">MiB</span>
<span class="n">weight</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>          <span class="n">float32</span>         <span class="p">(</span><span class="mi">276124</span><span class="p">,)</span>              <span class="mi">1</span> <span class="n">MiB</span>
  <span class="o">&gt;&gt;</span><span class="n">percentiles</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="o">%</span><span class="p">:</span> <span class="p">[</span> <span class="mf">3019.16308594</span> <span class="mf">13027.213125</span>   <span class="mf">17858.26757812</span> <span class="mf">23346.20828125</span>
 <span class="mf">44115.19140625</span><span class="p">]</span>
<span class="n">chanfreq</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>        <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>       <span class="mf">152839584578.1958</span> <span class="n">Hz</span> <span class="mf">152839584578.1958</span> <span class="n">Hz</span>
<span class="n">chanwidth</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>       <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>       <span class="mf">324236812.2266</span> <span class="n">Hz</span> <span class="mf">324236812.2266</span> <span class="n">Hz</span>
<span class="n">phasecenter</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>     <span class="mi">23</span><span class="n">h46m09</span><span class="o">.</span><span class="mi">438</span><span class="n">s</span>  <span class="mi">12</span><span class="n">d49m19</span><span class="o">.</span><span class="mi">25</span><span class="n">s</span>

<span class="n">Read</span><span class="p">:</span> <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>

<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>            <span class="n">complex64</span>       <span class="p">(</span><span class="mi">276124</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>            <span class="mi">2</span> <span class="n">MiB</span>
<span class="n">uvw</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>             <span class="n">float32</span>         <span class="p">(</span><span class="mi">276124</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>            <span class="mi">3</span> <span class="n">MiB</span>
<span class="n">weight</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>          <span class="n">float32</span>         <span class="p">(</span><span class="mi">276124</span><span class="p">,)</span>              <span class="mi">1</span> <span class="n">MiB</span>
  <span class="o">&gt;&gt;</span><span class="n">percentiles</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="o">%</span><span class="p">:</span> <span class="p">[</span>  <span class="mf">7820.72753906</span>  <span class="mf">33745.1590625</span>   <span class="mf">46259.30664062</span>  <span class="mf">60475.089375</span>
 <span class="mf">114274.328125</span>  <span class="p">]</span>
<span class="n">chanfreq</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>        <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>       <span class="mf">154120905956.6333</span> <span class="n">Hz</span> <span class="mf">154120905956.6333</span> <span class="n">Hz</span>
<span class="n">chanwidth</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>       <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>       <span class="mf">839890537.6953</span> <span class="n">Hz</span> <span class="mf">839890537.6953</span> <span class="n">Hz</span>
<span class="n">phasecenter</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>     <span class="mi">23</span><span class="n">h46m09</span><span class="o">.</span><span class="mi">438</span><span class="n">s</span>  <span class="mi">12</span><span class="n">d49m19</span><span class="o">.</span><span class="mi">25</span><span class="n">s</span>

<span class="n">Read</span><span class="p">:</span> <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>

<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>            <span class="n">complex64</span>       <span class="p">(</span><span class="mi">276124</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>            <span class="mi">2</span> <span class="n">MiB</span>
<span class="n">uvw</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>             <span class="n">float32</span>         <span class="p">(</span><span class="mi">276124</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>            <span class="mi">3</span> <span class="n">MiB</span>
<span class="n">weight</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>          <span class="n">float32</span>         <span class="p">(</span><span class="mi">276124</span><span class="p">,)</span>              <span class="mi">1</span> <span class="n">MiB</span>
  <span class="o">&gt;&gt;</span><span class="n">percentiles</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="o">%</span><span class="p">:</span> <span class="p">[</span> <span class="mf">10978.32617188</span>  <span class="mf">60905.94515625</span>  <span class="mf">85937.25</span>       <span class="mf">113244.640625</span>
 <span class="mf">218176.15625</span>   <span class="p">]</span>
<span class="n">chanfreq</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>        <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>       <span class="mf">155441364443.2279</span> <span class="n">Hz</span> <span class="mf">155441364443.2279</span> <span class="n">Hz</span>
<span class="n">chanwidth</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>       <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>       <span class="mf">1863385053.3984</span> <span class="n">Hz</span> <span class="mf">1863385053.3984</span> <span class="n">Hz</span>
<span class="n">phasecenter</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>     <span class="mi">23</span><span class="n">h46m09</span><span class="o">.</span><span class="mi">438</span><span class="n">s</span>  <span class="mi">12</span><span class="n">d49m19</span><span class="o">.</span><span class="mi">25</span><span class="n">s</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="o">---</span> <span class="n">dat_dct</span> <span class="n">size</span> <span class="mf">692.76</span> <span class="n">Mibyte</span> <span class="o">---</span>
<span class="o">---</span> <span class="n">took</span> <span class="mf">14.62557</span> <span class="n">seconds</span> <span class="o">---</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>#
#mod_dct=gmake.inp2mod(inp_dct)
#gmake.pprint(mod_dct)
#gmake.model_vrot(mod_dct)
#gmake.pprint(mod_dct)
#gmake.model_vrot_plot(mod_dct[&#39;co76&#39;])

inp_dct=gmake.read_inp(inpfile)
inp_dct=gmake.inp_validate(inp_dct)
mod_dct=gmake.inp2mod(inp_dct)
gmake.model_vrot(mod_dct)
#mod_dct[&#39;co76&#39;]
%mprun -f gmake.model_eval.model_lnlike2 fit_dct=gmake.fit_setup(inp_dct,dat_dct,save_model=False,initial_model=False)
#fit_dct=gmake.fit_setup(inp_dct,dat_dct,initial_model=True,save_model=False)
#%mprun -f gmake.fit_iterate gmake.fit_iterate(fit_dct,inp_dct,dat_dct)
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
<span class="n">optimizer</span><span class="p">:</span> <span class="n">amoeba</span>
<span class="n">optimizing</span> <span class="n">parameters</span><span class="p">:</span>
<span class="o">----------------------------------------------------------------------------------------------------</span>
<span class="n">index</span>    <span class="n">name</span>    <span class="n">unit</span>    <span class="n">start</span>    <span class="n">lo_limit</span>    <span class="n">up_limit</span>    <span class="n">scale</span>
 <span class="mi">0</span>   <span class="n">vsys</span><span class="nd">@basics</span>       <span class="n">km</span> <span class="o">/</span> <span class="n">s</span>               <span class="mf">100.00</span>      <span class="p">(</span>     <span class="mf">0.00</span>     <span class="p">,</span>     <span class="mf">220.00</span>     <span class="p">)</span>    <span class="mf">120.00</span>
 <span class="mi">1</span>   <span class="n">disk_sd</span><span class="nd">@diskdyn</span>   <span class="n">solMass</span> <span class="o">/</span> <span class="n">pc2</span>        <span class="mf">3000.00</span>     <span class="p">(</span>    <span class="mf">100.00</span>    <span class="p">,</span>    <span class="mf">50000.00</span>    <span class="p">)</span>   <span class="mf">47000.00</span>
 <span class="mi">2</span>   <span class="n">disk_rs</span><span class="nd">@diskdyn</span>   <span class="n">kpc</span>                   <span class="mf">2.00</span>       <span class="p">(</span>     <span class="mf">0.20</span>     <span class="p">,</span>      <span class="mf">10.00</span>     <span class="p">)</span>     <span class="mf">8.00</span>
 <span class="mi">3</span>   <span class="n">vdis</span><span class="nd">@basics</span>       <span class="n">km</span> <span class="o">/</span> <span class="n">s</span>                <span class="mf">50.00</span>      <span class="p">(</span>     <span class="mf">0.00</span>     <span class="p">,</span>     <span class="mf">200.00</span>     <span class="p">)</span>    <span class="mf">150.00</span>
 <span class="mi">4</span>   <span class="n">pa</span><span class="nd">@basics</span>         <span class="n">deg</span>                  <span class="o">-</span><span class="mf">52.40</span>      <span class="p">(</span>    <span class="o">-</span><span class="mf">132.40</span>   <span class="p">,</span>      <span class="mf">27.60</span>     <span class="p">)</span>     <span class="mf">80.00</span>
 <span class="mi">5</span>   <span class="n">inc</span><span class="nd">@basics</span>        <span class="n">deg</span>                   <span class="mf">44.06</span>      <span class="p">(</span>     <span class="mf">5.00</span>     <span class="p">,</span>      <span class="mf">85.00</span>     <span class="p">)</span>     <span class="mf">40.94</span>
 <span class="mi">6</span>   <span class="n">xypos</span><span class="o">.</span><span class="n">ra</span><span class="nd">@basics</span>   <span class="n">deg</span>                <span class="mf">356.5393258</span>   <span class="p">(</span>  <span class="mf">356.5390481</span> <span class="p">,</span>   <span class="mf">356.5396036</span>  <span class="p">)</span>   <span class="mf">0.0002778</span>
 <span class="mi">7</span>   <span class="n">xypos</span><span class="o">.</span><span class="n">dec</span><span class="nd">@basics</span>  <span class="n">deg</span>                <span class="mf">12.8220182</span>    <span class="p">(</span>  <span class="mf">12.8217404</span>  <span class="p">,</span>   <span class="mf">12.8222960</span>   <span class="p">)</span>   <span class="mf">0.0002778</span>
 <span class="mi">8</span>   <span class="n">lineflux</span><span class="nd">@co43</span>     <span class="n">Jy</span> <span class="n">km</span> <span class="o">/</span> <span class="n">s</span>             <span class="mf">1.00</span>       <span class="p">(</span>     <span class="mf">0.10</span>     <span class="p">,</span>     <span class="mf">200.00</span>     <span class="p">)</span>    <span class="mf">199.00</span>
 <span class="mi">9</span>   <span class="n">sbser</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="nd">@co43</span>     <span class="n">arcsec</span>                <span class="mf">0.22</span>       <span class="p">(</span>     <span class="mf">0.01</span>     <span class="p">,</span>      <span class="mf">2.00</span>      <span class="p">)</span>     <span class="mf">1.78</span>
 <span class="mi">10</span>  <span class="n">lineflux</span><span class="nd">@ci10</span>     <span class="n">Jy</span> <span class="n">km</span> <span class="o">/</span> <span class="n">s</span>             <span class="mf">0.50</span>       <span class="p">(</span>     <span class="mf">0.10</span>     <span class="p">,</span>     <span class="mf">200.00</span>     <span class="p">)</span>    <span class="mf">199.50</span>
 <span class="mi">11</span>  <span class="n">sbser</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="nd">@ci10</span>     <span class="n">arcsec</span>                <span class="mf">0.19</span>       <span class="p">(</span>     <span class="mf">0.01</span>     <span class="p">,</span>      <span class="mf">2.00</span>      <span class="p">)</span>     <span class="mf">1.81</span>
 <span class="mi">12</span>  <span class="n">contflux</span><span class="nd">@cont</span>     <span class="n">Jy</span>                    <span class="mf">0.00</span>       <span class="p">(</span>     <span class="mf">0.00</span>     <span class="p">,</span>      <span class="mf">0.01</span>      <span class="p">)</span>     <span class="mf">0.01</span>
 <span class="mi">13</span>  <span class="n">sbser</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="nd">@cont</span>     <span class="n">arcsec</span>                <span class="mf">0.15</span>       <span class="p">(</span>     <span class="mf">0.01</span>     <span class="p">,</span>      <span class="mf">2.00</span>      <span class="p">)</span>     <span class="mf">1.85</span>
 <span class="mi">14</span>  <span class="n">alpha</span><span class="nd">@cont</span>                              <span class="mf">3.72</span>       <span class="p">(</span>     <span class="mf">3.00</span>     <span class="p">,</span>      <span class="mf">4.50</span>      <span class="p">)</span>     <span class="mf">0.78</span>
<span class="o">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
<span class="n">ndim</span><span class="p">:</span>    <span class="mi">15</span>
<span class="n">outdir</span><span class="p">:</span>  <span class="n">bx610_b4c5_uv_ab</span>
<span class="o">---</span> <span class="n">save</span> <span class="n">to</span><span class="p">:</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">fit</span><span class="o">.</span><span class="n">h5</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>#%mprun -f gmake.model_eval.model_lnprob lnl,lnprob,chisq,ndata,npar=gmake.model_lnprob(fit_dct[&#39;p_start&#39;],fit_dct,inp_dct,dat_dct,savemodel=None)
#%timeit lnl,lnprob,chisq,ndata,npar=gmake.model_lnprob(fit_dct[&#39;p_start&#39;],fit_dct,inp_dct,dat_dct,savemodel=None)
#%timeit lnl,lnprob,chisq,ndata,npar=gmake.model_lnprob2(fit_dct[&#39;p_start&#39;],fit_dct,inp_dct,dat_dct,savemodel=None)
#%lprun -f gmake.model_func.model_uvchi2  lnl,lnprob,chisq,ndata,npar=gmake.model_lnprob2(fit_dct[&#39;p_start&#39;],fit_dct,inp_dct,dat_dct,savemodel=None)
%mprun -f gmake.model_func.model_uvchi2 lnl,lnprob,chisq,ndata,npar=gmake.model_lnprob2(fit_dct[&#39;p_start&#39;],fit_dct,inp_dct,dat_dct,savemodel=None)
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Filename</span><span class="p">:</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">gmake</span><span class="o">/</span><span class="n">model_func</span><span class="o">.</span><span class="n">py</span>

<span class="n">Line</span> <span class="c1">#    Mem usage    Increment   Line Contents</span>
<span class="o">================================================</span>
   <span class="mi">783</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>   <span class="mf">2523.8</span> <span class="n">MiB</span>   <span class="k">def</span> <span class="nf">model_uvchi2</span><span class="p">(</span><span class="n">xymod3d</span><span class="p">,</span><span class="n">xymod2d</span><span class="p">,</span><span class="n">xyheader</span><span class="p">,</span>
   <span class="mi">784</span>                                                 <span class="n">uvdata</span><span class="p">,</span><span class="n">uvw</span><span class="p">,</span><span class="n">phasecenter</span><span class="p">,</span><span class="n">uvweight</span><span class="p">,</span>
   <span class="mi">785</span>                                                 <span class="n">average</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
   <span class="mi">786</span>                                 <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">   787                                 simulate the observation in the UV-domain</span>
<span class="s2">   788                                 The input reference 2D / 3D model (e.g. continuume+line) is expected in units of Jy/pix</span>
<span class="s2">   789</span>
<span class="s2">   790                                 uvw shape:           nrecord x 3</span>
<span class="s2">   791                                 uvmodel shape:       nrecord x nchan (less likely: nrecord x nchan x ncorr)</span>
<span class="s2">   792                                 xymodel shape:       nstokes x nchan x ny x nx</span>
<span class="s2">   793</span>
<span class="s2">   794                                 note1:</span>
<span class="s2">   795                                     Because sampleImaging() can be only applied to single-wavelength dataset, we have to loop over</span>
<span class="s2">   796                                     all channels for multi-frequency dataset (e.g. spectral cubes). This loop operations is typically</span>
<span class="s2">   797                                     the bottle-neck. To reduce the number of operation, we can only do uvsampling for frequency-plane</span>
<span class="s2">   798                                     with varying morphology and process frequency-inpdent emission using one operation:</span>
<span class="s2">   799                                     the minimal number of operations required  is:</span>
<span class="s2">   800                                             nplane(with varying morphology) + 1 x sampleImage()</span>
<span class="s2">   801                                       we already trim any else overhead (e.g. creating new array) and reach close to this limit.</span>
<span class="s2">   802</span>
<span class="s2">   803                                 note2:</span>
<span class="s2">   804                                     when &lt;uvmodel&gt; is provided as input, a new model will be added into the array without additional memory usage</span>
<span class="s2">   805                                       the return variable is just a reference of mutable &lt;uvmodel&gt;</span>
<span class="s2">   806</span>
<span class="s2">   807                                 &quot;&quot;&quot;</span>
   <span class="mi">808</span>
   <span class="mi">809</span>                                 <span class="c1">#print(&#39;3d:&#39;,xymod3d is not None)</span>
   <span class="mi">810</span>                                 <span class="c1">#print(&#39;2d:&#39;,xymod2d is not None)</span>
   <span class="mi">811</span>
   <span class="mi">812</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="n">cell</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">xyheader</span><span class="p">[</span><span class="s1">&#39;CDELT1&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">xyheader</span><span class="p">[</span><span class="s1">&#39;CDELT2&#39;</span><span class="p">]))</span>
   <span class="mi">813</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="n">nchan</span><span class="o">=</span><span class="n">xyheader</span><span class="p">[</span><span class="s1">&#39;NAXIS3&#39;</span><span class="p">]</span>
   <span class="mi">814</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="n">nrecord</span><span class="o">=</span><span class="p">(</span><span class="n">uvw</span><span class="o">.</span><span class="n">shape</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
   <span class="mi">815</span>
   <span class="mi">816</span>                                 <span class="c1"># + zeros_like vs. zeros()</span>
   <span class="mi">817</span>                                 <span class="c1">#   the memory of an array created by zeros() can allocated on-the-fly</span>
   <span class="mi">818</span>                                 <span class="c1">#   the creation will appear to be faster but the looping+plan initialization may be slightly slower (or comparable?)</span>
   <span class="mi">819</span>                                 <span class="c1"># + set order=&#39;F&#39; as we want to have quick access to each column:</span>
   <span class="mi">820</span>                                 <span class="c1">#   i.a. first dimension is consequential in memory</span>
   <span class="mi">821</span>                                 <span class="c1">#   this will improve on the performance of picking uvdata from each channel</span>
   <span class="mi">822</span>                                 <span class="c1"># we force order=&#39;F&#39;, so the first dimension is continiuous and we can quicky fetch each channel</span>
   <span class="mi">823</span>                                 <span class="c1"># as the information in a single channel is saved in a block</span>
   <span class="mi">824</span>
   <span class="mi">825</span>
   <span class="mi">826</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="k">if</span>  <span class="n">verbose</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
   <span class="mi">827</span>                                     <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
   <span class="mi">828</span>                                     <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nchan,nrecord:&#39;</span><span class="p">,</span><span class="n">nchan</span><span class="p">,</span><span class="n">nrecord</span><span class="p">)</span>
   <span class="mi">829</span>
   <span class="mi">830</span>                                 <span class="c1"># assume that CRPIX1/CRPIX2 is at model image &quot;center&quot; floor(naxis/2);</span>
   <span class="mi">831</span>                                 <span class="c1"># which is true for the mock-up/reference model image xyheader</span>
   <span class="mi">832</span>                                 <span class="c1"># more information on the pixel index /ra-dec mapping, see:</span>
   <span class="mi">833</span>                                 <span class="c1">#       https://mtazzari.github.io/galario/tech-specs.html</span>
   <span class="mi">834</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="n">dRA</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="o">+</span><span class="p">(</span><span class="n">xyheader</span><span class="p">[</span><span class="s1">&#39;CRVAL1&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">phasecenter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_value</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)))</span>
   <span class="mi">835</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="n">dDec</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="o">+</span><span class="p">(</span><span class="n">xyheader</span><span class="p">[</span><span class="s1">&#39;CRVAL2&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">phasecenter</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">to_value</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)))</span>
   <span class="mi">836</span>
   <span class="mi">837</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="n">cc</span><span class="o">=</span><span class="mi">0</span>
   <span class="mi">838</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="n">chi2</span><span class="o">=</span><span class="mi">0</span>
   <span class="mi">839</span>
   <span class="mi">840</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="k">if</span>  <span class="n">xymod2d</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
   <span class="mi">841</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>           <span class="n">i0</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">nchan</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span>
   <span class="mi">842</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>           <span class="n">xymodelsum</span><span class="o">=</span><span class="n">xymod2d</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
   <span class="mi">843</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>           <span class="n">xymodel_zscale</span><span class="o">=</span><span class="n">xymodelsum</span><span class="o">/</span><span class="n">xymodelsum</span><span class="p">[</span><span class="n">i0</span><span class="p">]</span>
   <span class="mi">844</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>           <span class="n">wv</span><span class="o">=</span><span class="n">const</span><span class="o">.</span><span class="n">c</span><span class="o">/</span><span class="p">(</span><span class="n">xyheader</span><span class="p">[</span><span class="s1">&#39;CDELT3&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">i0</span><span class="o">+</span><span class="n">xyheader</span><span class="p">[</span><span class="s1">&#39;CRVAL3&#39;</span><span class="p">])</span>
   <span class="mi">845</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>           <span class="n">cc</span><span class="o">+=</span><span class="mi">1</span>
   <span class="mi">846</span>                                     <span class="c1">#ss=time.time()</span>
   <span class="mi">847</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>           <span class="n">uvmod2d</span><span class="o">=</span><span class="n">sampleImage</span><span class="p">((</span><span class="n">xymod2d</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">i0</span><span class="p">,:,:]),</span>
   <span class="mi">848</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">cell</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
   <span class="mi">849</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                <span class="p">(</span><span class="n">uvw</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">wv</span><span class="p">),</span>
   <span class="mi">850</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                <span class="p">(</span><span class="n">uvw</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">wv</span><span class="p">),</span>
   <span class="mi">851</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                <span class="n">dRA</span><span class="o">=</span><span class="n">dRA</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span><span class="n">dDec</span><span class="o">=</span><span class="n">dDec</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
   <span class="mi">852</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.2</span> <span class="n">MiB</span>                                <span class="n">PA</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="n">check</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">)</span>
   <span class="mi">853</span>
   <span class="mi">854</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="k">if</span>  <span class="n">xymod3d</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
   <span class="mi">855</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>           <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nchan</span><span class="p">):</span>
   <span class="mi">856</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>               <span class="k">if</span>  <span class="n">ne</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="s2">&quot;sum(a)&quot;</span><span class="p">,</span><span class="n">local_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="n">xymod3d</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="p">,:,:]})</span><span class="o">==</span><span class="mf">0.0</span><span class="p">:</span>
   <span class="mi">857</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                   <span class="n">delta_uv</span><span class="o">=</span><span class="n">ne</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="s1">&#39;a2*a3-b&#39;</span><span class="p">,</span>
   <span class="mi">858</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                    <span class="n">local_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a2&#39;</span><span class="p">:</span><span class="n">uvmod2d</span><span class="p">,</span>
   <span class="mi">859</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                                <span class="s1">&#39;a3&#39;</span><span class="p">:</span><span class="n">xymodel_zscale</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
   <span class="mi">860</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">4.2</span> <span class="n">MiB</span>                                                <span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="n">uvdata</span><span class="p">[:,</span><span class="n">i</span><span class="p">]})</span>
   <span class="mi">861</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                   <span class="n">chi2</span><span class="o">+=</span><span class="n">ne</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="s1">&#39;sum( ( (a.real)**2+(a.imag)**2 ) *c)&#39;</span><span class="p">,</span>
   <span class="mi">862</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                    <span class="n">local_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="n">delta_uv</span><span class="p">,</span>
   <span class="mi">863</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                                <span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="n">uvweight</span><span class="p">})</span>
   <span class="mi">864</span>                                             <span class="c1">#chi2+=ne.evaluate(&#39;sum( abs(a)**2*c)&#39;,</span>
   <span class="mi">865</span>                                             <span class="c1">#                 local_dict={&#39;a&#39;:delta_uv,</span>
   <span class="mi">866</span>                                             <span class="c1">#                             &#39;c&#39;:uvweight})</span>
   <span class="mi">867</span>                                         <span class="k">else</span><span class="p">:</span>
   <span class="mi">868</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                   <span class="n">wv</span><span class="o">=</span><span class="n">const</span><span class="o">.</span><span class="n">c</span><span class="o">/</span><span class="p">(</span><span class="n">xyheader</span><span class="p">[</span><span class="s1">&#39;CDELT3&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="n">xyheader</span><span class="p">[</span><span class="s1">&#39;CRVAL3&#39;</span><span class="p">])</span>
   <span class="mi">869</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                   <span class="n">cc</span><span class="o">+=</span><span class="mi">1</span>
   <span class="mi">870</span>                                             <span class="c1">#uvmod3d=sampleImage((xymod3d[0,i,:,:]),</span>
   <span class="mi">871</span>                                             <span class="c1">#                                        (np.deg2rad(cell)).astype(np.float32),</span>
   <span class="mi">872</span>                                             <span class="c1">#                                        (uvw[:,0]/wv),</span>
   <span class="mi">873</span>                                             <span class="c1">#                                        (uvw[:,1]/wv),</span>
   <span class="mi">874</span>                                             <span class="c1">#                                        dRA=dRA.astype(np.float32),dDec=dDec.astype(np.float32),</span>
   <span class="mi">875</span>                                             <span class="c1">#                                        PA=0.,check=False,origin=&#39;lower&#39;)</span>
   <span class="mi">876</span>                                             <span class="c1">#uvmodel=uvmod3d+uvmod2d*xymodel_zscale[i]</span>
   <span class="mi">877</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                   <span class="n">delta_uv</span><span class="o">=</span><span class="n">ne</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="s1">&#39;a2*a3+a1-b&#39;</span><span class="p">,</span>
   <span class="mi">878</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                    <span class="n">local_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a1&#39;</span><span class="p">:</span><span class="n">sampleImage</span><span class="p">((</span><span class="n">xymod3d</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="p">,:,:]),</span>
   <span class="mi">879</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                                           <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">cell</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
   <span class="mi">880</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                                           <span class="p">(</span><span class="n">uvw</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">wv</span><span class="p">),</span>
   <span class="mi">881</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                                           <span class="p">(</span><span class="n">uvw</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">wv</span><span class="p">),</span>
   <span class="mi">882</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                                           <span class="n">dRA</span><span class="o">=</span><span class="n">dRA</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span><span class="n">dDec</span><span class="o">=</span><span class="n">dDec</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
   <span class="mi">883</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">2.1</span> <span class="n">MiB</span>                                                           <span class="n">PA</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span><span class="n">check</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">),</span>
   <span class="mi">884</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                                <span class="s1">&#39;a2&#39;</span><span class="p">:</span><span class="n">uvmod2d</span><span class="p">,</span>
   <span class="mi">885</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                                <span class="s1">&#39;a3&#39;</span><span class="p">:</span><span class="n">xymodel_zscale</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
   <span class="mi">886</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">4.3</span> <span class="n">MiB</span>                                                <span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="n">uvdata</span><span class="p">[:,</span><span class="n">i</span><span class="p">]})</span>
   <span class="mi">887</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                   <span class="n">chi2</span><span class="o">+=</span><span class="n">ne</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="s1">&#39;sum( ( (a.real)**2+(a.imag)**2 ) *c)&#39;</span><span class="p">,</span>
   <span class="mi">888</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                    <span class="n">local_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="n">delta_uv</span><span class="p">,</span>
   <span class="mi">889</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                                                <span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="n">uvweight</span><span class="p">})</span>
   <span class="mi">890</span>                                             <span class="c1">#chi2+=ne.evaluate(&#39;sum( abs(a)**2*c)&#39;,</span>
   <span class="mi">891</span>                                             <span class="c1">#                 local_dict={&#39;a&#39;:delta_uv,</span>
   <span class="mi">892</span>                                             <span class="c1">#                             &#39;c&#39;:uvweight})</span>
   <span class="mi">893</span>
   <span class="mi">894</span>
   <span class="mi">895</span>   <span class="mf">3115.3</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="k">return</span> <span class="n">chi2</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>#
#mod_dct=gmake.inp2mod(inp_dct)
#gmake.pprint(mod_dct)
#gmake.model_vrot(mod_dct)
#gmake.pprint(mod_dct)
#gmake.model_vrot_plot(mod_dct[&#39;co76&#39;])
import gmake
inp_dct=gmake.read_inp(inpfile)
inp_dct=gmake.inp_validate(inp_dct)
mod_dct=gmake.inp2mod(inp_dct)
gmake.model_vrot(mod_dct)
#mod_dct[&#39;co76&#39;]
%mprun -f gmake.model_eval.model_lnprob fit_dct=gmake.fit_setup(inp_dct,dat_dct)
#fit_dct=gmake.fit_setup(inp_dct,dat_dct,initial_model=True,save_model=False)
#%mprun -f gmake.fit_iterate gmake.fit_iterate(fit_dct,inp_dct,dat_dct)
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
<span class="n">optimizer</span><span class="p">:</span> <span class="n">amoeba</span>
<span class="n">optimizing</span> <span class="n">parameters</span><span class="p">:</span>
<span class="o">----------------------------------------------------------------------------------------------------</span>
<span class="n">index</span>    <span class="n">name</span>    <span class="n">unit</span>    <span class="n">start</span>    <span class="n">lo_limit</span>    <span class="n">up_limit</span>    <span class="n">scale</span>
 <span class="mi">0</span>   <span class="n">vsys</span><span class="nd">@basics</span>       <span class="n">km</span> <span class="o">/</span> <span class="n">s</span>               <span class="mf">100.00</span>      <span class="p">(</span>     <span class="mf">0.00</span>     <span class="p">,</span>     <span class="mf">220.00</span>     <span class="p">)</span>    <span class="mf">120.00</span>
 <span class="mi">1</span>   <span class="n">disk_sd</span><span class="nd">@diskdyn</span>   <span class="n">solMass</span> <span class="o">/</span> <span class="n">pc2</span>        <span class="mf">3000.00</span>     <span class="p">(</span>    <span class="mf">100.00</span>    <span class="p">,</span>    <span class="mf">50000.00</span>    <span class="p">)</span>   <span class="mf">47000.00</span>
 <span class="mi">2</span>   <span class="n">disk_rs</span><span class="nd">@diskdyn</span>   <span class="n">kpc</span>                   <span class="mf">2.00</span>       <span class="p">(</span>     <span class="mf">0.20</span>     <span class="p">,</span>      <span class="mf">10.00</span>     <span class="p">)</span>     <span class="mf">8.00</span>
 <span class="mi">3</span>   <span class="n">vdis</span><span class="nd">@basics</span>       <span class="n">km</span> <span class="o">/</span> <span class="n">s</span>                <span class="mf">50.00</span>      <span class="p">(</span>     <span class="mf">0.00</span>     <span class="p">,</span>     <span class="mf">200.00</span>     <span class="p">)</span>    <span class="mf">150.00</span>
 <span class="mi">4</span>   <span class="n">pa</span><span class="nd">@basics</span>         <span class="n">deg</span>                  <span class="o">-</span><span class="mf">52.40</span>      <span class="p">(</span>    <span class="o">-</span><span class="mf">132.40</span>   <span class="p">,</span>      <span class="mf">27.60</span>     <span class="p">)</span>     <span class="mf">80.00</span>
 <span class="mi">5</span>   <span class="n">inc</span><span class="nd">@basics</span>        <span class="n">deg</span>                   <span class="mf">44.06</span>      <span class="p">(</span>     <span class="mf">5.00</span>     <span class="p">,</span>      <span class="mf">85.00</span>     <span class="p">)</span>     <span class="mf">40.94</span>
 <span class="mi">6</span>   <span class="n">xypos</span><span class="o">.</span><span class="n">ra</span><span class="nd">@basics</span>   <span class="n">deg</span>                <span class="mf">356.5393258</span>   <span class="p">(</span>  <span class="mf">356.5390481</span> <span class="p">,</span>   <span class="mf">356.5396036</span>  <span class="p">)</span>   <span class="mf">0.0002778</span>
 <span class="mi">7</span>   <span class="n">xypos</span><span class="o">.</span><span class="n">dec</span><span class="nd">@basics</span>  <span class="n">deg</span>                <span class="mf">12.8220182</span>    <span class="p">(</span>  <span class="mf">12.8217404</span>  <span class="p">,</span>   <span class="mf">12.8222960</span>   <span class="p">)</span>   <span class="mf">0.0002778</span>
 <span class="mi">8</span>   <span class="n">lineflux</span><span class="nd">@co43</span>     <span class="n">Jy</span> <span class="n">km</span> <span class="o">/</span> <span class="n">s</span>             <span class="mf">1.00</span>       <span class="p">(</span>     <span class="mf">0.10</span>     <span class="p">,</span>     <span class="mf">200.00</span>     <span class="p">)</span>    <span class="mf">199.00</span>
 <span class="mi">9</span>   <span class="n">sbser</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="nd">@co43</span>     <span class="n">arcsec</span>                <span class="mf">0.22</span>       <span class="p">(</span>     <span class="mf">0.01</span>     <span class="p">,</span>      <span class="mf">2.00</span>      <span class="p">)</span>     <span class="mf">1.78</span>
 <span class="mi">10</span>  <span class="n">lineflux</span><span class="nd">@ci10</span>     <span class="n">Jy</span> <span class="n">km</span> <span class="o">/</span> <span class="n">s</span>             <span class="mf">0.50</span>       <span class="p">(</span>     <span class="mf">0.10</span>     <span class="p">,</span>     <span class="mf">200.00</span>     <span class="p">)</span>    <span class="mf">199.50</span>
 <span class="mi">11</span>  <span class="n">sbser</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="nd">@ci10</span>     <span class="n">arcsec</span>                <span class="mf">0.19</span>       <span class="p">(</span>     <span class="mf">0.01</span>     <span class="p">,</span>      <span class="mf">2.00</span>      <span class="p">)</span>     <span class="mf">1.81</span>
 <span class="mi">12</span>  <span class="n">contflux</span><span class="nd">@cont</span>     <span class="n">Jy</span>                    <span class="mf">0.00</span>       <span class="p">(</span>     <span class="mf">0.00</span>     <span class="p">,</span>      <span class="mf">0.01</span>      <span class="p">)</span>     <span class="mf">0.01</span>
 <span class="mi">13</span>  <span class="n">sbser</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="nd">@cont</span>     <span class="n">arcsec</span>                <span class="mf">0.15</span>       <span class="p">(</span>     <span class="mf">0.01</span>     <span class="p">,</span>      <span class="mf">2.00</span>      <span class="p">)</span>     <span class="mf">1.85</span>
 <span class="mi">14</span>  <span class="n">alpha</span><span class="nd">@cont</span>                              <span class="mf">3.72</span>       <span class="p">(</span>     <span class="mf">3.00</span>     <span class="p">,</span>      <span class="mf">4.50</span>      <span class="p">)</span>     <span class="mf">0.78</span>
<span class="o">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
<span class="n">ndim</span><span class="p">:</span>    <span class="mi">15</span>
<span class="n">outdir</span><span class="p">:</span>  <span class="n">bx610_b4c5_uv_ab</span>
<span class="n">one</span> <span class="n">trial</span>                                          <span class="p">:</span> <span class="mf">4.98618</span>  <span class="n">seconds</span>
<span class="n">ndata</span><span class="o">-&gt;</span><span class="mf">0.0</span>
<span class="n">chisq</span><span class="o">-&gt;</span><span class="mf">149336333.31762546</span>
<span class="o">---</span> <span class="n">save</span> <span class="n">to</span><span class="p">:</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">fit</span><span class="o">.</span><span class="n">h5</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Filename</span><span class="p">:</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">gmake</span><span class="o">/</span><span class="n">model_eval</span><span class="o">.</span><span class="n">py</span>

<span class="n">Line</span> <span class="c1">#    Mem usage    Increment   Line Contents</span>
<span class="o">================================================</span>
   <span class="mi">348</span>   <span class="mf">4518.4</span> <span class="n">MiB</span>   <span class="mf">4518.4</span> <span class="n">MiB</span>   <span class="k">def</span> <span class="nf">model_lnprob</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="n">fit_dct</span><span class="p">,</span><span class="n">inp_dct</span><span class="p">,</span><span class="n">dat_dct</span><span class="p">,</span>
   <span class="mi">349</span>                                              <span class="n">savemodel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">decomp</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nsamps</span><span class="o">=</span><span class="mf">1e5</span><span class="p">,</span>
   <span class="mi">350</span>                                              <span class="n">packblobs</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
   <span class="mi">351</span>                                              <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
   <span class="mi">352</span>                                 <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">   353                                 this is the evaluating function for emcee</span>
<span class="s2">   354                                 packblobs=True:</span>
<span class="s2">   355                                     lnl,blobs</span>
<span class="s2">   356                                 packblobs=False:</span>
<span class="s2">   357                                     lnl,lnp,chisq,ndata,npar</span>
<span class="s2">   358                                 &quot;&quot;&quot;</span>
   <span class="mi">359</span>
   <span class="mi">360</span>   <span class="mf">4518.4</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="k">if</span>  <span class="n">verbose</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
   <span class="mi">361</span>                                     <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
   <span class="mi">362</span>
   <span class="mi">363</span>   <span class="mf">4518.4</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="n">lp</span> <span class="o">=</span> <span class="n">model_lnprior</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="n">fit_dct</span><span class="p">)</span>
   <span class="mi">364</span>
   <span class="mi">365</span>   <span class="mf">4518.4</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="k">if</span>  <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">lp</span><span class="p">):</span>
   <span class="mi">366</span>                                     <span class="n">blobs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;lnprob&#39;</span><span class="p">:</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="s1">&#39;chisq&#39;</span><span class="p">:</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="s1">&#39;ndata&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="s1">&#39;npar&#39;</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">theta</span><span class="p">)}</span>
   <span class="mi">367</span>                                     <span class="k">if</span>  <span class="n">packblobs</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
   <span class="mi">368</span>                                         <span class="k">return</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="n">blobs</span>
   <span class="mi">369</span>                                     <span class="k">else</span><span class="p">:</span>
   <span class="mi">370</span>                                         <span class="k">return</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
   <span class="mi">371</span>
   <span class="mi">372</span>
   <span class="mi">373</span>
   <span class="mi">374</span>   <span class="mf">4518.4</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="n">lnl</span><span class="p">,</span><span class="n">blobs</span><span class="o">=</span><span class="n">model_lnlike2</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="n">fit_dct</span><span class="p">,</span><span class="n">inp_dct</span><span class="p">,</span><span class="n">dat_dct</span><span class="p">,</span>
   <span class="mi">375</span>   <span class="mf">4518.4</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                              <span class="n">savemodel</span><span class="o">=</span><span class="n">savemodel</span><span class="p">,</span><span class="n">decomp</span><span class="o">=</span><span class="n">decomp</span><span class="p">,</span><span class="n">nsamps</span><span class="o">=</span><span class="n">nsamps</span><span class="p">,</span>
   <span class="mi">376</span>   <span class="mf">4518.4</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>                              <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
   <span class="mi">377</span>
   <span class="mi">378</span>   <span class="mf">4518.4</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="k">if</span>  <span class="n">verbose</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
   <span class="mi">379</span>                                     <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;try -&gt;&quot;</span><span class="p">,</span><span class="n">theta</span><span class="p">)</span>
   <span class="mi">380</span>                                     <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---</span><span class="si">{0:^10}</span><span class="s2"> : </span><span class="si">{1:&lt;8.5f}</span><span class="s2"> seconds ---&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;lnprob&#39;</span><span class="p">,</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">start_time</span><span class="p">))</span>
   <span class="mi">381</span>
   <span class="mi">382</span>                                 <span class="c1"># np.array: to creat a zero-d object array</span>
   <span class="mi">383</span>   <span class="mf">4518.4</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>       <span class="k">if</span>  <span class="n">packblobs</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
   <span class="mi">384</span>                                     <span class="k">return</span> <span class="n">lp</span><span class="o">+</span><span class="n">lnl</span><span class="p">,</span><span class="n">blobs</span>
   <span class="mi">385</span>                                 <span class="k">else</span><span class="p">:</span>
   <span class="mi">386</span>   <span class="mf">4518.4</span> <span class="n">MiB</span>      <span class="mf">0.0</span> <span class="n">MiB</span>           <span class="k">return</span> <span class="n">lp</span><span class="o">+</span><span class="n">lnl</span><span class="p">,</span><span class="n">blobs</span><span class="p">[</span><span class="s1">&#39;lnprob&#39;</span><span class="p">],</span><span class="n">blobs</span><span class="p">[</span><span class="s1">&#39;chisq&#39;</span><span class="p">],</span><span class="n">blobs</span><span class="p">[</span><span class="s1">&#39;ndata&#39;</span><span class="p">],</span><span class="n">blobs</span><span class="p">[</span><span class="s1">&#39;npar&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>#%mprun -f gmake.model_eval.model_lnprob lnl,lnprob,chisq,ndata,npar=gmake.model_lnprob(fit_dct[&#39;p_start&#39;],fit_dct,inp_dct,dat_dct,savemodel=None)
%timeit lnl,lnprob,chisq,ndata,npar=gmake.model_lnprob(fit_dct[&#39;p_start&#39;],fit_dct,inp_dct,dat_dct,savemodel=None)
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>3.96 s ± 65.6 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>#from hickle import SerializedWarning
%matplotlib inline
#%matplotlib notebook
gmake.fit_analyze(inpfile,export=True)
#print(fit_dct[&#39;p_scale&#39;])
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span> <span class="n">save</span> <span class="n">to</span><span class="p">:</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">fit</span><span class="o">.</span><span class="n">h5</span>
<span class="n">Check</span> <span class="n">optimized</span> <span class="n">parameters</span><span class="p">:</span>
 <span class="mi">0</span>   <span class="n">vsys</span><span class="nd">@basics</span>       <span class="o">=</span>    <span class="mf">104.63</span>      <span class="o">&lt;-</span>    <span class="mf">100.00</span>      <span class="p">(</span>     <span class="mf">0.00</span>     <span class="p">,</span>     <span class="mf">220.00</span>     <span class="p">)</span>
 <span class="mi">1</span>   <span class="n">disk_sd</span><span class="nd">@diskdyn</span>   <span class="o">=</span>    <span class="mf">3194.29</span>     <span class="o">&lt;-</span>    <span class="mf">3000.00</span>     <span class="p">(</span>    <span class="mf">100.00</span>    <span class="p">,</span>    <span class="mf">50000.00</span>    <span class="p">)</span>
 <span class="mi">2</span>   <span class="n">disk_rs</span><span class="nd">@diskdyn</span>   <span class="o">=</span>     <span class="mf">2.78</span>       <span class="o">&lt;-</span>     <span class="mf">2.00</span>       <span class="p">(</span>     <span class="mf">0.20</span>     <span class="p">,</span>      <span class="mf">10.00</span>     <span class="p">)</span>
 <span class="mi">3</span>   <span class="n">vdis</span><span class="nd">@basics</span>       <span class="o">=</span>     <span class="mf">50.43</span>      <span class="o">&lt;-</span>     <span class="mf">50.00</span>      <span class="p">(</span>     <span class="mf">0.00</span>     <span class="p">,</span>     <span class="mf">200.00</span>     <span class="p">)</span>
 <span class="mi">4</span>   <span class="n">pa</span><span class="nd">@basics</span>         <span class="o">=</span>    <span class="o">-</span><span class="mf">54.23</span>      <span class="o">&lt;-</span>    <span class="o">-</span><span class="mf">52.40</span>      <span class="p">(</span>    <span class="o">-</span><span class="mf">132.40</span>   <span class="p">,</span>      <span class="mf">27.60</span>     <span class="p">)</span>
 <span class="mi">5</span>   <span class="n">inc</span><span class="nd">@basics</span>        <span class="o">=</span>     <span class="mf">46.25</span>      <span class="o">&lt;-</span>     <span class="mf">44.06</span>      <span class="p">(</span>     <span class="mf">5.00</span>     <span class="p">,</span>      <span class="mf">85.00</span>     <span class="p">)</span>
 <span class="mi">6</span>   <span class="n">xypos</span><span class="o">.</span><span class="n">ra</span><span class="nd">@basics</span>   <span class="o">=</span>  <span class="mf">356.5393221</span>   <span class="o">&lt;-</span>  <span class="mf">356.5393258</span>   <span class="p">(</span>  <span class="mf">356.5390481</span> <span class="p">,</span>   <span class="mf">356.5396036</span>  <span class="p">)</span>
 <span class="mi">7</span>   <span class="n">xypos</span><span class="o">.</span><span class="n">dec</span><span class="nd">@basics</span>  <span class="o">=</span>  <span class="mf">12.8220133</span>    <span class="o">&lt;-</span>  <span class="mf">12.8220182</span>    <span class="p">(</span>  <span class="mf">12.8217404</span>  <span class="p">,</span>   <span class="mf">12.8222960</span>   <span class="p">)</span>
 <span class="mi">8</span>   <span class="n">lineflux</span><span class="nd">@co43</span>     <span class="o">=</span>     <span class="mf">1.08</span>       <span class="o">&lt;-</span>     <span class="mf">1.00</span>       <span class="p">(</span>     <span class="mf">0.10</span>     <span class="p">,</span>     <span class="mf">200.00</span>     <span class="p">)</span>
 <span class="mi">9</span>   <span class="n">sbser</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="nd">@co43</span>     <span class="o">=</span>     <span class="mf">0.21</span>       <span class="o">&lt;-</span>     <span class="mf">0.22</span>       <span class="p">(</span>     <span class="mf">0.01</span>     <span class="p">,</span>      <span class="mf">2.00</span>      <span class="p">)</span>
 <span class="mi">10</span>  <span class="n">lineflux</span><span class="nd">@ci10</span>     <span class="o">=</span>     <span class="mf">0.49</span>       <span class="o">&lt;-</span>     <span class="mf">0.50</span>       <span class="p">(</span>     <span class="mf">0.10</span>     <span class="p">,</span>     <span class="mf">200.00</span>     <span class="p">)</span>
 <span class="mi">11</span>  <span class="n">sbser</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="nd">@ci10</span>     <span class="o">=</span>     <span class="mf">0.27</span>       <span class="o">&lt;-</span>     <span class="mf">0.19</span>       <span class="p">(</span>     <span class="mf">0.01</span>     <span class="p">,</span>      <span class="mf">2.00</span>      <span class="p">)</span>
 <span class="mi">12</span>  <span class="n">contflux</span><span class="nd">@cont</span>     <span class="o">=</span>     <span class="mf">0.00</span>       <span class="o">&lt;-</span>     <span class="mf">0.00</span>       <span class="p">(</span>     <span class="mf">0.00</span>     <span class="p">,</span>      <span class="mf">0.01</span>      <span class="p">)</span>
 <span class="mi">13</span>  <span class="n">sbser</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="nd">@cont</span>     <span class="o">=</span>     <span class="mf">0.18</span>       <span class="o">&lt;-</span>     <span class="mf">0.15</span>       <span class="p">(</span>     <span class="mf">0.01</span>     <span class="p">,</span>      <span class="mf">2.00</span>      <span class="p">)</span>
 <span class="mi">14</span>  <span class="n">alpha</span><span class="nd">@cont</span>        <span class="o">=</span>     <span class="mf">3.79</span>       <span class="o">&lt;-</span>     <span class="mf">3.72</span>       <span class="p">(</span>     <span class="mf">3.00</span>     <span class="p">,</span>      <span class="mf">4.50</span>      <span class="p">)</span>
<span class="n">analyzing</span> <span class="n">outfolder</span><span class="p">:</span><span class="n">bx610_b4c5_uv_ab</span>
<span class="n">plotting</span><span class="o">...</span><span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">iteration</span><span class="o">.</span><span class="n">pdf</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="mf">125111663.73342288</span> <span class="mi">35301632</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="mf">168486213.07584742</span> <span class="mi">49426196</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="mf">1118139.3760106005</span> <span class="mi">275794</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="mf">1161359.330965863</span> <span class="mi">275794</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="mf">1157667.521734547</span> <span class="mi">276124</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="mf">1205064.410572111</span> <span class="mi">276124</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="mf">1156301.2026866334</span> <span class="mi">276124</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="mf">1160934.690953595</span> <span class="mi">276124</span>
<span class="n">export</span> <span class="n">the</span> <span class="n">model</span> <span class="nb">set</span><span class="p">:</span>              <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span>              <span class="p">(</span><span class="n">may</span> <span class="n">take</span> <span class="n">some</span> <span class="n">time</span><span class="o">..</span><span class="p">)</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod2d_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod3d_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">pbeam_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">profile</span><span class="p">:</span>
    <span class="n">imod3d_prof</span><span class="nd">@co43</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imodrp_co43_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">data_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod2d_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod3d_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">pbeam_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">profile</span><span class="p">:</span>
    <span class="n">imod3d_prof</span><span class="nd">@ci10</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imodrp_ci10_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">data_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod2d_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod3d_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">pbeam_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">data_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod2d_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod3d_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">pbeam_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">data_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod2d_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod3d_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">pbeam_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">data_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod2d_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod3d_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">pbeam_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">data_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod2d_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod3d_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">pbeam_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">data_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod2d_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">imod3d_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">pbeam_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">data_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="o">---</span> <span class="n">took</span> <span class="mf">29.00081</span> <span class="n">seconds</span> <span class="o">---</span>
<span class="o">---</span> <span class="n">save</span> <span class="n">to</span><span class="p">:</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">models</span><span class="o">.</span><span class="n">h5</span>
<span class="n">save</span> <span class="n">the</span> <span class="n">model</span> <span class="nb">input</span> <span class="n">parameter</span><span class="p">:</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_0</span><span class="o">/</span><span class="n">model</span><span class="o">.</span><span class="n">inp</span>
<span class="n">model_0</span><span class="p">:</span>
<span class="p">{</span><span class="s1">&#39;chisq&#39;</span><span class="p">:</span> <span class="mf">300557343.3421936</span><span class="p">,</span>
 <span class="s1">&#39;lnprob&#39;</span><span class="p">:</span> <span class="mf">8519061.630641665</span><span class="p">,</span>
 <span class="s1">&#39;ndata&#39;</span><span class="p">:</span> <span class="mf">86383912.0</span><span class="p">,</span>
 <span class="s1">&#39;npar&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">}</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="mf">125111592.61012563</span> <span class="mi">35301632</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="mf">168486258.64972007</span> <span class="mi">49426196</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="mf">1118138.674951935</span> <span class="mi">275794</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="mf">1161366.5592344531</span> <span class="mi">275794</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="mf">1157663.9855508006</span> <span class="mi">276124</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="mf">1205062.388948932</span> <span class="mi">276124</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="mf">1156303.2738797683</span> <span class="mi">276124</span>
<span class="n">data</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="mf">1160942.1459157672</span> <span class="mi">276124</span>
<span class="n">export</span> <span class="n">the</span> <span class="n">model</span> <span class="nb">set</span><span class="p">:</span>              <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span>              <span class="p">(</span><span class="n">may</span> <span class="n">take</span> <span class="n">some</span> <span class="n">time</span><span class="o">..</span><span class="p">)</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod2d_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod3d_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">pbeam_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">profile</span><span class="p">:</span>
    <span class="n">imod3d_prof</span><span class="nd">@co43</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imodrp_co43_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">data_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod2d_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod3d_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">pbeam_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">profile</span><span class="p">:</span>
    <span class="n">imod3d_prof</span><span class="nd">@ci10</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imodrp_ci10_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">data_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt2</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod2d_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod3d_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">pbeam_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">data_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod2d_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod3d_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">pbeam_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">data_b4c5_bb1</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod2d_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod3d_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">pbeam_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">data_b4c5_bb2</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod2d_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod3d_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">pbeam_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">data_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt1</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod2d_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod3d_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">pbeam_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">data_b4c5_bb3</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">pt3</span>

<span class="o">--&gt;</span><span class="n">data_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>

<span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod2d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod2d_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span><span class="o">.</span><span class="n">fits</span>
<span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">imod3d</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">imod3d_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span><span class="o">.</span><span class="n">fits</span>
<span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">reference</span> <span class="n">model</span> <span class="n">image</span><span class="p">:</span>
    <span class="n">pbeam</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">pbeam_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span><span class="o">.</span><span class="n">fits</span>
<span class="n">copy</span> <span class="n">ms</span> <span class="n">container</span><span class="p">:</span>
    <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">write</span> <span class="n">ms</span> <span class="n">column</span><span class="p">:</span>
    <span class="n">uvmodel</span><span class="o">@../</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span> <span class="n">to</span> <span class="n">data</span><span class="nd">@bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="n">create</span> <span class="n">symlink</span><span class="p">:</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rui</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">GMaKE</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bx610</span><span class="o">/</span><span class="n">alma</span><span class="o">/</span><span class="mf">2017.1</span><span class="o">.</span><span class="mf">01045.</span><span class="n">S</span><span class="o">/</span><span class="n">bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>  <span class="n">to</span>  <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">data_b4c5_bb4</span><span class="o">.</span><span class="n">ms</span><span class="o">.</span><span class="n">mfs</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="o">---</span> <span class="n">took</span> <span class="mf">30.39432</span> <span class="n">seconds</span> <span class="o">---</span>
<span class="o">---</span> <span class="n">save</span> <span class="n">to</span><span class="p">:</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">models</span><span class="o">.</span><span class="n">h5</span>
<span class="n">save</span> <span class="n">the</span> <span class="n">model</span> <span class="nb">input</span> <span class="n">parameter</span><span class="p">:</span> <span class="n">bx610_b4c5_uv_ab</span><span class="o">/</span><span class="n">model_1</span><span class="o">/</span><span class="n">model</span><span class="o">.</span><span class="n">inp</span>
<span class="n">model_1</span><span class="p">:</span>
<span class="p">{</span><span class="s1">&#39;chisq&#39;</span><span class="p">:</span> <span class="mf">300557328.28832734</span><span class="p">,</span>
 <span class="s1">&#39;lnprob&#39;</span><span class="p">:</span> <span class="mf">8519069.157574806</span><span class="p">,</span>
 <span class="s1">&#39;ndata&#39;</span><span class="p">:</span> <span class="mf">86383912.0</span><span class="p">,</span>
 <span class="s1">&#39;npar&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Figure</span> <span class="n">size</span> <span class="mi">432</span><span class="n">x288</span> <span class="k">with</span> <span class="mi">0</span> <span class="n">Axes</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>models=gmake.hdf2dct(inp_dct[&#39;general&#39;][&#39;outdir&#39;]+&#39;/model_1/models.h5&#39;)
#gmake.pprint(models[&#39;mod_dct&#39;][&#39;co43&#39;])
gmake.model_vrot_plot(models[&#39;mod_dct&#39;][&#39;co43&#39;])
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Figure</span> <span class="n">size</span> <span class="mi">432</span><span class="n">x288</span> <span class="k">with</span> <span class="mi">0</span> <span class="n">Axes</span><span class="o">&gt;</span>
</pre></div>
</div>
<img alt="../_images/demo_bx610_b4c5_uv_ab_9_1.png" src="../_images/demo_bx610_b4c5_uv_ab_9_1.png" />
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from galario.single import sampleImage
from galario.single import chi2Image
import numexpr as ne
import numpy as np
def method_sampleImage(dat_dct):
    xymodel=np.ones((512,512),dtype=np.float32)
    data=dat_dct[&#39;data@../data/bx610/alma/2017.1.01045.S/bb2.ms.mfs&#39;]

    uvw=dat_dct[&#39;uvw@../data/bx610/alma/2017.1.01045.S/bb2.ms.mfs&#39;]
    weight=dat_dct[&#39;weight@../data/bx610/alma/2017.1.01045.S/bb2.ms.mfs&#39;]
    wv=np.mean(dat_dct[&#39;chanfreq@../data/bx610/alma/2017.1.01045.S/bb4.ms.mfs&#39;])
    uvmodel=sampleImage(xymodel,np.deg2rad(0.007/60./60.).astype(np.float32),
                        (uvw[:,0]/wv),(uvw[:,1]/wv),
                        dRA=0,dDec=0,PA=0.,check=False,origin=&#39;lower&#39;)
    #print(uvmodel[:,np.newaxis].shape)
    #print(data.shape)
    #print(weight[:,np.newaxis].shape)
    chi2=ne.evaluate(&#39;sum(((a.real-b.real)**2.0+(a.imag-b.imag)**2)*c)&#39;,
                local_dict={&#39;a&#39;:data,
                            &#39;b&#39;:uvmodel[:,np.newaxis],
                            &#39;c&#39;:weight[:,np.newaxis]})
    return chi2

def method_chi2Image(dat_dct):
    xymodel=np.ones((512,512),dtype=np.float32,order=&#39;&#39;)
    data=dat_dct[&#39;data@../data/bx610/alma/2017.1.01045.S/bb2.ms.mfs&#39;]
    real=np.ascontiguousarray(data[:,0].real)
    imag=np.ascontiguousarray(data[:,0].imag)
    uvw=dat_dct[&#39;uvw@../data/bx610/alma/2017.1.01045.S/bb2.ms.mfs&#39;]
    weight=dat_dct[&#39;weight@../data/bx610/alma/2017.1.01045.S/bb2.ms.mfs&#39;]
    wv=np.mean(dat_dct[&#39;chanfreq@../data/bx610/alma/2017.1.01045.S/bb4.ms.mfs&#39;])
    chi2=chi2Image(xymodel,np.deg2rad(0.007/60./60.).astype(np.float32),
                   uvw[:,0]/wv,uvw[:,1]/wv,
                   real,imag,weight,
                   dRA=0,dDec=0,PA=0.,check=False,origin=&#39;lower&#39;)

    return chi2

#%lprun -f method_sampleImage chi2=method_sampleImage(dat_dct)
#print(chi2)

%timeit chi2=method_sampleImage(dat_dct)
print(chi2)

#%lprun -f method_chi2Image chi2=method_chi2Image(dat_dct)
#print(chi2)

#%timeit chi2=method_chi2Image(dat_dct)
#print(chi2)
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>9.41 ms ± 376 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
1.926698859779456e+21
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="demo_bx610_b6c3_uv_ab.html" class="btn btn-neutral float-right" title="Example BX610: perform model fitting using method=‘amoeba’ for the Band 6 Cycle 3 DataSet" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="demo_bx610_b4c2_uv_ab.html" class="btn btn-neutral float-left" title="Example BX610: perform model fitting using method=‘amoeba’ for the Band 4 Cycle 2 DataSet" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Rui Xue

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>