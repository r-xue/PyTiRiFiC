

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Example: GN20 (z~4 SMF) : Data Prep &mdash; GMaKE 0.2.dev1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="/Users/Rui/Documents/Workspace/projects/GMaKE/docs/source/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Example: BX610 (High-z SFG) : Data Prep" href="demo_bx610_prep.html" />
    <link rel="prev" title="Input File Format" href="../par_def.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> GMaKE
          

          
          </a>

          
            
            
              <div class="version">
                0.2.dev1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../par_def.html">Input File Format</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Example: GN20 (z~4 SMF) : Data Prep</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prepare-visibiity-data-from-the-calibrated-ms-restored-by-the-local-alma-pipeline">Prepare visibiity data from the calibrated MS restored by the local ALMA pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#load-some-essential-python-modules-casa-6-tasks-tools">Load some essential Python modules + CASA 6 tasks/tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#import-some-convinient-functions-from-rxutils">Import some convinient functions from <code class="docutils literal notranslate"><span class="pre">rxutils</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_prep.html">Example: BX610 (High-z SFG) : Data Prep</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_imaging.html">Example: BX610 (High-z SFG) : Data Imaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_display.html">Example: BX610 (High-z SFG) : Examine Moment0 + 1D Spectrum</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_b4c2_uv_ab.html">Example BX610: perform model fitting using method=‘amoeba’ for the Band 4 Cycle 2 DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_b4c5_uv_ab.html">Example BX610: perform model fitting using method=‘amoeba’ for the Band 4 Cycle 5 DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_b6c3_uv_ab.html">Example BX610: perform model fitting using method=‘amoeba’ for the Band 6 Cycle 3 DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_model_1dspec.html">Invert Visibility + Plot 1D spectra (may take a while)</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_emcee.html">Example BX610: perform model fitting using method=‘emcee’</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_hxmm01_prep.html">Example: HXMM01 (High-z Merger)</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_hxmm01_simulate.html">Example HXMM01: test the MS-simulation modules</a></li>
</ul>
<p class="caption"><span class="caption-text">Tests</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tests/test_uvsample_performance.html">Test the performance of the Image-to-MS-related modules</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMaKE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Example: GN20 (z~4 SMF) : Data Prep</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="example-gn20-z-4-smf-data-prep">
<h1>Example: GN20 (z~4 SMF) : Data Prep<a class="headerlink" href="#example-gn20-z-4-smf-data-prep" title="Permalink to this headline">¶</a></h1>
<div class="section" id="prepare-visibiity-data-from-the-calibrated-ms-restored-by-the-local-alma-pipeline">
<h2>Prepare visibiity data from the calibrated MS restored by the local ALMA pipeline<a class="headerlink" href="#prepare-visibiity-data-from-the-calibrated-ms-restored-by-the-local-alma-pipeline" title="Permalink to this headline">¶</a></h2>
<p>The VLA CASA-integrated pipleline began to operate from Jan 2013. The
“scripted” older pipeline from NRAO might work with this dataset?
<a class="reference external" href="https://science.nrao.edu/facilities/vla/data-processing/pipeline/scripted-pipeline">https://science.nrao.edu/facilities/vla/data-processing/pipeline/scripted-pipeline</a></p>
<p>Steps to proceed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Data</span> <span class="n">Calibration</span>

<span class="n">Split</span> <span class="n">Calibrated</span> <span class="n">Visibility</span> <span class="n">Window</span> <span class="n">by</span> <span class="n">Window</span>

<span class="n">Perform</span> <span class="n">Channel</span><span class="o">/</span><span class="n">Time</span> <span class="n">averging</span>

<span class="n">Averging</span> <span class="n">over</span> <span class="n">continuum</span> <span class="n">channel</span> <span class="o">/</span> <span class="n">spectral</span> <span class="n">window</span> <span class="n">partition</span>
</pre></div>
</div>
<div class="section" id="load-some-essential-python-modules-casa-6-tasks-tools">
<h3>Load some essential Python modules + CASA 6 tasks/tools<a class="headerlink" href="#load-some-essential-python-modules-casa-6-tasks-tools" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import sys,os,glob,io,socket
import logging
from pprint import pprint
import numpy as np

import casatasks as ctasks
import casatools as ctools

# Import wurlitzer for display real-time console logs
#   https://github.com/minrk/wurlitzer
%reload_ext wurlitzer

# for inline plots
%matplotlib inline
%config InlineBackend.figure_format = &quot;retina&quot;
</pre></div>
</div>
<p>Using the beta-version of CASA 6</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>print(&#39;casatools ver:&#39;,ctools.version_string())
print(&#39;casatasks ver:&#39;,ctasks.version_string())
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">casatools</span> <span class="n">ver</span><span class="p">:</span> <span class="mf">2019.172</span>
<span class="n">casatasks</span> <span class="n">ver</span><span class="p">:</span> <span class="mf">2019.166</span>
</pre></div>
</div>
</div>
<div class="section" id="import-some-convinient-functions-from-rxutils">
<h3>Import some convinient functions from <code class="docutils literal notranslate"><span class="pre">rxutils</span></code><a class="headerlink" href="#import-some-convinient-functions-from-rxutils" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from rxutils.casa.proc import rmPointing        # help remove POINTING tables hidden under
from rxutils.casa.proc import setLogfile        # help reset the casa 6 log file
from rxutils.casa.proc import checkchflag       # help check channel-wise flagging stats
from rxutils.casa.proc import getcommonfreqs    # obatin the frequency coverage of one SPW in a specified frame (e.g. TOPO-LSRK)
from rxutils.casa.proc import rmColumns         # remove columns from MS
</pre></div>
</div>
<p>Hodge+2012:</p>
<blockquote>
<div><p>We observed the CO(2–1) transition toward the GN20 field as part of
VLA key project AC974. The project was awarded 96 hr in
B-configuration (baselines up to 10 km) and 28 hr in D-configuration
(baselines up to 1 km), for a total of 124 hr. The observations were
dynamically scheduled and took place in 2010 March–April
(D-configuration) and 2011 February–April (B-configuration). The
CO(2–1) line (rest frequency ν = 230.5424 GHz) is redshifted to ν =
45.655 GHz at z = 4.05, requiring the Q band. The primary beam is ∼1′
(FWHM) at this frequency, and the pointing center was chosen to be
10′′ west of GN20 so that GN20, the nearby SMGs (and fellow
protocluster members) GN20.2a and GN20.2b, and the z = 1.5 galaxy
BzK–21,000 would all fall within the 70% sensitivity radius of the
primary beam (data presented in J. A. Hodge et al. 2012, submitted).
All images have been corrected for the response of the VLA primary
beam. We centered the two 128 MHz intermediate frequencies (IFs) at
45.592 GHz and 45.720 GHz, for a total bandwidth of 246 MHz or 1600
km s−1 (taking into account the overlap). Each of the two IFs had 64
channels, resulting in an instrumental velocity resolution of 13 km s
polarization mode.</p>
</div></blockquote>
<blockquote>
<div><div class="line-block">
<div class="line">AC974_sb1178393_1.55284.176880300925 public AC974 x 10-Mar-29
04:14:43 10-Mar-29 11:13:28 32.19GB VLA:D:0 C Q SDMset raw OK Scans
Logs</div>
<div class="line">AC974_sb1178393_1.55290.15952814815 public AC974 x 10-Apr-04
03:51:01 10-Apr-04 10:49:52 32.20GB VLA:D:0 C Q SDMset raw OK Scans
Logs</div>
<div class="line">AC974_sb1178393_1_000.55294.19113723379 public AC974 x 10-Apr-08
04:35:15 10-Apr-08 11:33:59 34.81GB VLA:D:0 C Q SDMset raw OK Scans
Logs</div>
<div class="line">AC974_sb1178393_1.55295.14680190972 public AC974 x 10-Apr-09
03:31:24 10-Apr-09 10:30:13 34.82GB VLA:D:0 C Q SDMset raw OK Scans
Logs</div>
<div class="line">AC974.sb3282289.eb3372706.55603.30302575231 public AC974 x
11-Feb-11 07:16:26 11-Feb-11 14:15:17 35.38GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372707.55604.21726888889 public AC974 x
11-Feb-12 05:12:53 11-Feb-12 12:11:40 38.12GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372708.55606.21154611111 public AC974 x
11-Feb-14 05:04:58 11-Feb-14 12:03:49 38.13GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372709.55608.19656930555 public AC974 x
11-Feb-16 04:57:06 11-Feb-16 11:55:57 38.13GB VLA:C=&gt;CNB:0 C Q
SDMset raw info Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372710.55609.20419065972 public AC974 x
11-Feb-17 04:54:03 11-Feb-17 11:52:01 35.30GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372711.55610.18910030092 public AC974 x
11-Feb-18 04:49:14 11-Feb-18 11:48:05 35.38GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372712.55611.200792627315 public AC974 x
11-Feb-19 04:50:17 11-Feb-19 11:49:08 38.13GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372713.55613.19257357639 public AC974 x
11-Feb-21 04:37:26 11-Feb-21 11:36:17 38.12GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372714.55616.27802989583 public AC974 x
11-Feb-24 06:40:24 11-Feb-24 13:39:08 35.38GB VLA:B:0 C Q SDMset
raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372715.55618.305010428245 public AC974 x
11-Feb-26 07:19:14 11-Feb-26 14:16:09 35.22GB VLA:B:0 C Q SDMset
raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372716_000.55619.25416130787 public AC974 x
11-Feb-27 06:08:32 11-Feb-27 13:07:23 35.39GB VLA:B:0 C Q SDMset
raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372717.55626.21851298611 public AC974 x
11-Mar-06 05:16:06 11-Mar-06 12:14:57 37.68GB VLA:B:0 C Q SDMset
raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372718.55632.18241631945 public AC974 x
11-Mar-12 04:22:43 11-Mar-12 11:21:26 37.67GB VLA:B:0 C Q SDMset
raw OK Scans Logs</div>
<div class="line">AC974.sb3848174.eb3850825.55679.073782673615 public AC974 x
11-Apr-28 01:47:41 11-Apr-28 06:46:52 26.92GB VLA:B:0 C Q SDMset
raw OK Scans Logs</div>
</div>
</div></blockquote>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="demo_bx610_prep.html" class="btn btn-neutral float-right" title="Example: BX610 (High-z SFG) : Data Prep" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../par_def.html" class="btn btn-neutral float-left" title="Input File Format" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Rui Xue

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>