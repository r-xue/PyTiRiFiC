

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Example: GN20 (z~4 SMF) : Data Prep &mdash; GMaKE 0.2.dev1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="/Users/Rui/Documents/Workspace/projects/GMaKE/docs/source/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Import some convinient functions from rxutils" href="demo_gn20_imaging.html" />
    <link rel="prev" title="Input File Format" href="../par_def.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> GMaKE
          

          
          </a>

          
            
            
              <div class="version">
                0.2.dev1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../par_def.html">Input File Format</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Example: GN20 (z~4 SMF) : Data Prep</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#archive-query">Archive Query:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#load-some-essential-python-modules-casa-6-tasks-tools">Load some essential Python modules + CASA 6 tasks/tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-beta-version-of-casa-6">Using the beta-version of CASA 6</a></li>
<li class="toctree-l3"><a class="reference internal" href="#import-some-convinient-functions-from-rxutils">Import some convinient functions from <code class="docutils literal notranslate"><span class="pre">rxutils</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reduce-raw-data-size">Reduce Raw Data Size</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-calibration">Data Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prepare-visibiity-data-from-the-calibrated-ms-from-the-modified-vla-scripted-pipeline">Prepare visibiity data from the calibrated MS from the modified VLA scripted pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prep-calibrated-data">Prep Calibrated Data:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="demo_gn20_imaging.html">Import some convinient functions from <code class="docutils literal notranslate"><span class="pre">rxutils</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_prep.html">Example: BX610 (High-z SFG) : Data Prep</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_imaging.html">Example: BX610 (High-z SFG) : Data Imaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_display.html">Example: BX610 (High-z SFG) : Examine Moment0 + 1D Spectrum</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_b4c2_uv_ab.html">Example BX610: perform model fitting using method=‘amoeba’ for the Band 4 Cycle 2 DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_b4c5_uv_ab.html">Example BX610: perform model fitting using method=‘amoeba’ for the Band 4 Cycle 5 DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_b6c3_uv_ab.html">Example BX610: perform model fitting using method=‘amoeba’ for the Band 6 Cycle 3 DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_model_1dspec.html">Invert Visibility + Plot 1D spectra (may take a while)</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_bx610_emcee.html">Example BX610: perform model fitting using method=‘emcee’</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_hxmm01_prep.html">Example: HXMM01 (High-z Merger)</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_hxmm01_simulate.html">Example HXMM01: test the MS-simulation modules</a></li>
</ul>
<p class="caption"><span class="caption-text">Tests</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tests/test_uvsample_performance.html">Test the performance of the Image-to-MS-related modules</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMaKE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Example: GN20 (z~4 SMF) : Data Prep</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="example-gn20-z-4-smf-data-prep">
<h1>Example: GN20 (z~4 SMF) : Data Prep<a class="headerlink" href="#example-gn20-z-4-smf-data-prep" title="Permalink to this headline">¶</a></h1>
<div class="section" id="archive-query">
<h2>Archive Query:<a class="headerlink" href="#archive-query" title="Permalink to this headline">¶</a></h2>
<p>We make the follow choices:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">To</span> <span class="n">reduce</span> <span class="n">the</span> <span class="n">data</span> <span class="n">size</span> <span class="ow">and</span> <span class="n">local</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span><span class="p">(</span><span class="n">SDM</span><span class="o">-&gt;</span><span class="n">MS</span><span class="p">),</span> <span class="n">we</span> <span class="n">selected</span> <span class="n">MS</span> <span class="k">as</span> <span class="n">the</span> <span class="n">download</span> <span class="nb">format</span> <span class="k">with</span> <span class="n">importevla</span> <span class="n">flagging</span> <span class="n">turned</span> <span class="n">on</span><span class="o">.</span>

<span class="n">In</span> <span class="n">addition</span><span class="p">,</span> <span class="n">we</span> <span class="n">turned</span> <span class="n">off</span> <span class="n">relevant</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="n">shadow</span><span class="p">)</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">local</span> <span class="n">pipeline</span> <span class="n">to</span> <span class="n">save</span> <span class="n">pipeline</span> <span class="n">running</span> <span class="n">time</span><span class="o">.</span>

<span class="n">We</span> <span class="n">didn</span><span class="s1">&#39;t chose any spectral/time averaging to preserve original raw data characertics for better calibrations.</span>
</pre></div>
</div>
<div class="section" id="load-some-essential-python-modules-casa-6-tasks-tools">
<h3>Load some essential Python modules + CASA 6 tasks/tools<a class="headerlink" href="#load-some-essential-python-modules-casa-6-tasks-tools" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import sys,os,glob,io,socket
import logging
from pprint import pprint
import numpy as np

import casatasks as ctasks
import casatools as ctools

# Import wurlitzer for display real-time console logs
#   https://github.com/minrk/wurlitzer
%reload_ext wurlitzer

# for inline plots
%matplotlib inline
%config InlineBackend.figure_format = &quot;retina&quot;
</pre></div>
</div>
</div>
<div class="section" id="using-the-beta-version-of-casa-6">
<h3>Using the beta-version of CASA 6<a class="headerlink" href="#using-the-beta-version-of-casa-6" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>print(&#39;casatools ver:&#39;,ctools.version_string())
print(&#39;casatasks ver:&#39;,ctasks.version_string())
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">casatools</span> <span class="n">ver</span><span class="p">:</span> <span class="mf">2019.172</span>
<span class="n">casatasks</span> <span class="n">ver</span><span class="p">:</span> <span class="mf">2019.166</span>
</pre></div>
</div>
</div>
<div class="section" id="import-some-convinient-functions-from-rxutils">
<h3>Import some convinient functions from <code class="docutils literal notranslate"><span class="pre">rxutils</span></code><a class="headerlink" href="#import-some-convinient-functions-from-rxutils" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from rxutils.casa.proc import rmPointing        # help remove POINTING tables hidden under
from rxutils.casa.proc import setLogfile        # help reset the casa 6 log file
from rxutils.casa.proc import checkchflag       # help check channel-wise flagging stats
from rxutils.casa.proc import getcommonfreqs    # obatin the frequency coverage of one SPW in a specified frame (e.g. TOPO-LSRK)
from rxutils.casa.proc import rmColumns         # remove columns from MS
</pre></div>
</div>
</div>
</div>
<div class="section" id="reduce-raw-data-size">
<h2>Reduce Raw Data Size<a class="headerlink" href="#reduce-raw-data-size" title="Permalink to this headline">¶</a></h2>
<p>The main purpose of this step is getting rid of RL/LR and flagged rows
to speed up calibrations and reduce local I/O load.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import glob
import os
from casatasks import mstransform

demo_dir=&#39;/Volumes/D2/raw/AC974/&#39; # where the original archival dataset stored
if  &#39;hypersion&#39; or &#39;mini&#39; in socket.gethostname() :
    os.chdir(demo_dir)
setLogfile(&#39;/Volumes/D1/raw/AC974/demo_gn20_prep.log&#39;)

mslist=glob.glob(&#39;*.ms&#39;)

for ms in mslist:
    outms=&#39;/Volumes/D1/raw/AC974/&#39;+ms.replace(&#39;.ms&#39;,&#39;.ms&#39;) # a slim verson of archival data
    if  os.path.isdir(outms):
        continue
    mstransform(vis=ms,outputvis=outms,correlation=&#39;RR,LL&#39;,keepflags=False,datacolumn=&#39;data&#39;)
    flagmanager(vis=outms,mode=&#39;save&#39;,versionname=&#39;Original&#39;,merge=&#39;replace&#39;,\
                comment=&#39;Original Flagging from the archive with online/shadown/zero flagging applied nad completed flagged rows are removed&#39;)
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="c1">##########################################</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="c1">##### Begin Task: mstransform        #####</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="n">mstransform</span><span class="p">(</span> <span class="n">vis</span><span class="o">=</span><span class="s1">&#39;AC974.sb3282289.eb3372715.55618.305010428245.ms&#39;</span><span class="p">,</span> <span class="n">outputvis</span><span class="o">=</span><span class="s1">&#39;/Volumes/D1/raw/AC974/AC974.sb3282289.eb3372715.55618.305010428245.ms&#39;</span><span class="p">,</span> <span class="n">createmms</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">separationaxis</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">numsubms</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">tileshape</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">field</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">spw</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">scan</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">antenna</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">correlation</span><span class="o">=</span><span class="s1">&#39;RR,LL&#39;</span><span class="p">,</span> <span class="n">timerange</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">array</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">uvrange</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">observation</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">feed</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">datacolumn</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">realmodelcol</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">keepflags</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">usewtspectrum</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">combinespws</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">chanaverage</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">chanbin</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">hanning</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">regridms</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;channel&#39;</span><span class="p">,</span> <span class="n">nchan</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nspw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="n">phasecenter</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">restfreq</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">outframe</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">veltype</span><span class="o">=</span><span class="s1">&#39;radio&#39;</span><span class="p">,</span> <span class="n">preaverage</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeaverage</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timebin</span><span class="o">=</span><span class="s1">&#39;0s&#39;</span><span class="p">,</span> <span class="n">timespan</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">maxuvwdistance</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">docallib</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">callib</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">douvcontsub</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fitspw</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fitorder</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">want_cont</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">denoising_lib</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nthreads</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">niter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">disableparallel</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ddistart</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">taql</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">monolithic_processing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">reindex</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Input</span> <span class="n">file</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">AC974</span><span class="o">.</span><span class="n">sb3282289</span><span class="o">.</span><span class="n">eb3372715</span><span class="o">.</span><span class="mf">55618.305010428245</span><span class="o">.</span><span class="n">ms</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Data</span> <span class="n">column</span> <span class="ow">is</span> <span class="n">DATA</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Output</span> <span class="n">file</span> <span class="n">name</span> <span class="ow">is</span> <span class="o">/</span><span class="n">Volumes</span><span class="o">/</span><span class="n">D1</span><span class="o">/</span><span class="n">raw</span><span class="o">/</span><span class="n">AC974</span><span class="o">/</span><span class="n">AC974</span><span class="o">.</span><span class="n">sb3282289</span><span class="o">.</span><span class="n">eb3372715</span><span class="o">.</span><span class="mf">55618.305010428245</span><span class="o">.</span><span class="n">ms</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Re</span><span class="o">-</span><span class="n">index</span> <span class="ow">is</span> <span class="n">enabled</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Tile</span> <span class="n">shape</span> <span class="ow">is</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseDataSelParams</span>  <span class="n">correlation</span> <span class="n">selection</span> <span class="ow">is</span> <span class="n">RR</span><span class="p">,</span><span class="n">LL</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">colCheckInfo</span>        <span class="n">Adding</span> <span class="n">DATA</span> <span class="n">column</span> <span class="n">to</span> <span class="n">output</span> <span class="n">MS</span> <span class="kn">from</span> <span class="nn">input</span> <span class="n">DATA</span> <span class="n">column</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">initDataSelectionParams</span>     <span class="n">Selected</span> <span class="n">correlations</span> <span class="n">are</span> <span class="p">[[[</span><span class="mi">0</span><span class="p">]</span> <span class="n">to</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">with</span> <span class="n">stride</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">length</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="n">to</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="k">with</span> <span class="n">stride</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">length</span> <span class="p">[</span><span class="mi">1</span><span class="p">]]]</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="nb">open</span>        <span class="n">Select</span> <span class="n">data</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">createOutputMSStructure</span>     <span class="n">Create</span> <span class="n">output</span> <span class="n">MS</span> <span class="n">structure</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">19</span> <span class="n">INFO</span>    <span class="n">MSTransformDataHandler</span><span class="p">::</span><span class="n">makeSelection</span>   <span class="mi">14075263</span> <span class="n">out</span> <span class="n">of</span> <span class="mi">16259750</span> <span class="n">rows</span> <span class="n">are</span> <span class="n">going</span> <span class="n">to</span> <span class="n">be</span> <span class="n">considered</span> <span class="n">due</span> <span class="n">to</span> <span class="n">the</span> <span class="n">selection</span> <span class="n">criteria</span><span class="o">.</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">27</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="n">Apply</span> <span class="n">the</span> <span class="n">transformations</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="n">Result</span> <span class="n">mstransform</span><span class="p">:</span> <span class="kc">True</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="n">Task</span> <span class="n">mstransform</span> <span class="n">complete</span><span class="o">.</span> <span class="n">Start</span> <span class="n">time</span><span class="p">:</span> <span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">16</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mf">42.687432</span> <span class="n">End</span> <span class="n">time</span><span class="p">:</span> <span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">16</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mf">02.886568</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="c1">##### End Task: mstransform          #####</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="c1">##########################################</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="c1">##########################################</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="c1">##### Begin Task: mstransform        #####</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="n">mstransform</span><span class="p">(</span> <span class="n">vis</span><span class="o">=</span><span class="s1">&#39;AC974.sb3282289.eb3372716_000.55619.25416130787.ms&#39;</span><span class="p">,</span> <span class="n">outputvis</span><span class="o">=</span><span class="s1">&#39;/Volumes/D1/raw/AC974/AC974.sb3282289.eb3372716_000.55619.25416130787.ms&#39;</span><span class="p">,</span> <span class="n">createmms</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">separationaxis</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">numsubms</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">tileshape</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">field</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">spw</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">scan</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">antenna</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">correlation</span><span class="o">=</span><span class="s1">&#39;RR,LL&#39;</span><span class="p">,</span> <span class="n">timerange</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">array</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">uvrange</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">observation</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">feed</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">datacolumn</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">realmodelcol</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">keepflags</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">usewtspectrum</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">combinespws</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">chanaverage</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">chanbin</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">hanning</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">regridms</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;channel&#39;</span><span class="p">,</span> <span class="n">nchan</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nspw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="n">phasecenter</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">restfreq</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">outframe</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">veltype</span><span class="o">=</span><span class="s1">&#39;radio&#39;</span><span class="p">,</span> <span class="n">preaverage</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeaverage</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timebin</span><span class="o">=</span><span class="s1">&#39;0s&#39;</span><span class="p">,</span> <span class="n">timespan</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">maxuvwdistance</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">docallib</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">callib</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">douvcontsub</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fitspw</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fitorder</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">want_cont</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">denoising_lib</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nthreads</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">niter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">disableparallel</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ddistart</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">taql</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">monolithic_processing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">reindex</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Input</span> <span class="n">file</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">AC974</span><span class="o">.</span><span class="n">sb3282289</span><span class="o">.</span><span class="n">eb3372716_000</span><span class="o">.</span><span class="mf">55619.25416130787</span><span class="o">.</span><span class="n">ms</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Data</span> <span class="n">column</span> <span class="ow">is</span> <span class="n">DATA</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Output</span> <span class="n">file</span> <span class="n">name</span> <span class="ow">is</span> <span class="o">/</span><span class="n">Volumes</span><span class="o">/</span><span class="n">D1</span><span class="o">/</span><span class="n">raw</span><span class="o">/</span><span class="n">AC974</span><span class="o">/</span><span class="n">AC974</span><span class="o">.</span><span class="n">sb3282289</span><span class="o">.</span><span class="n">eb3372716_000</span><span class="o">.</span><span class="mf">55619.25416130787</span><span class="o">.</span><span class="n">ms</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Re</span><span class="o">-</span><span class="n">index</span> <span class="ow">is</span> <span class="n">enabled</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Tile</span> <span class="n">shape</span> <span class="ow">is</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseDataSelParams</span>  <span class="n">correlation</span> <span class="n">selection</span> <span class="ow">is</span> <span class="n">RR</span><span class="p">,</span><span class="n">LL</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">colCheckInfo</span>        <span class="n">Adding</span> <span class="n">DATA</span> <span class="n">column</span> <span class="n">to</span> <span class="n">output</span> <span class="n">MS</span> <span class="kn">from</span> <span class="nn">input</span> <span class="n">DATA</span> <span class="n">column</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">initDataSelectionParams</span>     <span class="n">Selected</span> <span class="n">correlations</span> <span class="n">are</span> <span class="p">[[[</span><span class="mi">0</span><span class="p">]</span> <span class="n">to</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">with</span> <span class="n">stride</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">length</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="n">to</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="k">with</span> <span class="n">stride</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">length</span> <span class="p">[</span><span class="mi">1</span><span class="p">]]]</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="nb">open</span>        <span class="n">Select</span> <span class="n">data</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">createOutputMSStructure</span>     <span class="n">Create</span> <span class="n">output</span> <span class="n">MS</span> <span class="n">structure</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">31</span> <span class="n">INFO</span>    <span class="n">MSTransformDataHandler</span><span class="p">::</span><span class="n">makeSelection</span>   <span class="mi">13513309</span> <span class="n">out</span> <span class="n">of</span> <span class="mi">16335150</span> <span class="n">rows</span> <span class="n">are</span> <span class="n">going</span> <span class="n">to</span> <span class="n">be</span> <span class="n">considered</span> <span class="n">due</span> <span class="n">to</span> <span class="n">the</span> <span class="n">selection</span> <span class="n">criteria</span><span class="o">.</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">26</span> <span class="mi">22</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">40</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="n">Apply</span> <span class="n">the</span> <span class="n">transformations</span>
</pre></div>
</div>
</div>
<div class="section" id="data-calibration">
<h2>Data Calibration<a class="headerlink" href="#data-calibration" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="prepare-visibiity-data-from-the-calibrated-ms-from-the-modified-vla-scripted-pipeline">
<h2>Prepare visibiity data from the calibrated MS from the modified VLA scripted pipeline<a class="headerlink" href="#prepare-visibiity-data-from-the-calibrated-ms-from-the-modified-vla-scripted-pipeline" title="Permalink to this headline">¶</a></h2>
<p>The VLA CASA-integrated pipleline began to operate from Jan 2013. The
“scripted” older pipeline from NRAO seems to work with the dataset after
some modification in the pipeline and minor data metadata corrections.</p>
<p><a class="reference external" href="https://science.nrao.edu/facilities/vla/data-processing/pipeline/scripted-pipeline">https://science.nrao.edu/facilities/vla/data-processing/pipeline/scripted-pipeline</a></p>
<p>Hodge+2012:</p>
<blockquote>
<div><p>We observed the CO(2–1) transition toward the GN20 field as part of
VLA key project AC974. The project was awarded 96 hr in
B-configuration (baselines up to 10 km) and 28 hr in D-configuration
(baselines up to 1 km), for a total of 124 hr. The observations were
dynamically scheduled and took place in 2010 March–April
(D-configuration) and 2011 February–April (B-configuration). The
CO(2–1) line (rest frequency ν = 230.5424 GHz) is redshifted to ν =
45.655 GHz at z = 4.05, requiring the Q band. The primary beam is ∼1′
(FWHM) at this frequency, and the pointing center was chosen to be
10′′ west of GN20 so that GN20, the nearby SMGs (and fellow
protocluster members) GN20.2a and GN20.2b, and the z = 1.5 galaxy
BzK–21,000 would all fall within the 70% sensitivity radius of the
primary beam (data presented in J. A. Hodge et al. 2012, submitted).
All images have been corrected for the response of the VLA primary
beam. We centered the two 128 MHz intermediate frequencies (IFs) at
45.592 GHz and 45.720 GHz, for a total bandwidth of 246 MHz or 1600
km s−1 (taking into account the overlap). Each of the two IFs had 64
channels, resulting in an instrumental velocity resolution of 13 km s
polarization mode.</p>
</div></blockquote>
<blockquote>
<div><div class="line-block">
<div class="line">AC974_sb1178393_1.55284.176880300925 public AC974 x 10-Mar-29
04:14:43 10-Mar-29 11:13:28 32.19GB VLA:D:0 C Q SDMset raw OK Scans
Logs</div>
<div class="line">AC974_sb1178393_1.55290.15952814815 public AC974 x 10-Apr-04
03:51:01 10-Apr-04 10:49:52 32.20GB VLA:D:0 C Q SDMset raw OK Scans
Logs</div>
<div class="line">AC974_sb1178393_1_000.55294.19113723379 public AC974 x 10-Apr-08
04:35:15 10-Apr-08 11:33:59 34.81GB VLA:D:0 C Q SDMset raw OK Scans
Logs</div>
<div class="line">AC974_sb1178393_1.55295.14680190972 public AC974 x 10-Apr-09
03:31:24 10-Apr-09 10:30:13 34.82GB VLA:D:0 C Q SDMset raw OK Scans
Logs</div>
<div class="line">AC974.sb3282289.eb3372706.55603.30302575231 public AC974 x
11-Feb-11 07:16:26 11-Feb-11 14:15:17 35.38GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372707.55604.21726888889 public AC974 x
11-Feb-12 05:12:53 11-Feb-12 12:11:40 38.12GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372708.55606.21154611111 public AC974 x
11-Feb-14 05:04:58 11-Feb-14 12:03:49 38.13GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372709.55608.19656930555 public AC974 x
11-Feb-16 04:57:06 11-Feb-16 11:55:57 38.13GB VLA:C=&gt;CNB:0 C Q
SDMset raw info Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372710.55609.20419065972 public AC974 x
11-Feb-17 04:54:03 11-Feb-17 11:52:01 35.30GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372711.55610.18910030092 public AC974 x
11-Feb-18 04:49:14 11-Feb-18 11:48:05 35.38GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372712.55611.200792627315 public AC974 x
11-Feb-19 04:50:17 11-Feb-19 11:49:08 38.13GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372713.55613.19257357639 public AC974 x
11-Feb-21 04:37:26 11-Feb-21 11:36:17 38.12GB VLA:C=&gt;CNB:0 C Q
SDMset raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372714.55616.27802989583 public AC974 x
11-Feb-24 06:40:24 11-Feb-24 13:39:08 35.38GB VLA:B:0 C Q SDMset
raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372715.55618.305010428245 public AC974 x
11-Feb-26 07:19:14 11-Feb-26 14:16:09 35.22GB VLA:B:0 C Q SDMset
raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372716_000.55619.25416130787 public AC974 x
11-Feb-27 06:08:32 11-Feb-27 13:07:23 35.39GB VLA:B:0 C Q SDMset
raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372717.55626.21851298611 public AC974 x
11-Mar-06 05:16:06 11-Mar-06 12:14:57 37.68GB VLA:B:0 C Q SDMset
raw OK Scans Logs</div>
<div class="line">AC974.sb3282289.eb3372718.55632.18241631945 public AC974 x
11-Mar-12 04:22:43 11-Mar-12 11:21:26 37.67GB VLA:B:0 C Q SDMset
raw OK Scans Logs</div>
<div class="line">AC974.sb3848174.eb3850825.55679.073782673615 public AC974 x
11-Apr-28 01:47:41 11-Apr-28 06:46:52 26.92GB VLA:B:0 C Q SDMset
raw OK Scans Logs</div>
</div>
</div></blockquote>
</div>
<div class="section" id="prep-calibrated-data">
<h2>Prep Calibrated Data:<a class="headerlink" href="#prep-calibrated-data" title="Permalink to this headline">¶</a></h2>
<p>Steps to proceed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Split</span> <span class="n">Calibrated</span> <span class="n">Visibility</span> <span class="n">Window</span> <span class="n">by</span> <span class="n">Window</span>

<span class="n">Perform</span> <span class="n">Channel</span><span class="o">/</span><span class="n">Time</span> <span class="n">averging</span>

<span class="n">Averging</span> <span class="n">over</span> <span class="n">continuum</span> <span class="n">channel</span> <span class="o">/</span> <span class="n">spectral</span> <span class="n">window</span> <span class="n">partition</span>

<span class="n">Averging</span> <span class="n">to</span> <span class="mi">30</span><span class="n">s</span>
<span class="n">Combine</span> <span class="n">two</span> <span class="n">SPWs</span> <span class="n">covering</span> <span class="n">CO</span> <span class="mi">2</span><span class="o">-</span><span class="mi">1</span>

<span class="n">rename</span> <span class="n">file</span><span class="p">:</span> <span class="n">projectid</span><span class="o">.</span><span class="n">yymmdd</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Switch working directory

import glob
demo_dir=&#39;/Users/Rui/Documents/Workspace/projects/GMaKE/examples/data/gn20/&#39;
if  &#39;hypersion&#39; or &#39;mini&#39; in socket.gethostname() :
    os.chdir(demo_dir)
setLogfile(demo_dir+&#39;/&#39;+&#39;demo_GN20.log&#39;)

mslist=[]
mslist.extend(glob.glob(&#39;/Volumes/D1/proc/AC974.100*/AC*ms&#39;))

for ms in mslist:
    #ctasks.flagdata(vis_name,autocorr=True,flagbackup=True)

    outms=ms.split(&#39;/&#39;)[-2]
    outms=outms+&#39;.ms&#39;
    os.system(&#39;rm -rf &#39;+outms)
    ctasks.mstransform(ms,outputvis=outms,field=&#39;GN20cluster&#39;,spw=&#39;2,3&#39;,datacolumn=&#39;corrected&#39;,correlation=&#39;RR,LL&#39;,
                        regridms=True,outframe=&#39;lsrk&#39;,combinespws=True,mode=&#39;channel&#39;,start=1,nchan=128,width=1,
                        timeaverage=True,timebin=&#39;30s&#39;,maxuvwdistance=0.0,
                        keepflags=False,usewtspectrum=False)
    #rmPointing(outvis) # pointing tables are generally small for EVLA data
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="c1">##########################################</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="c1">##### Begin Task: mstransform        #####</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="n">mstransform</span><span class="p">(</span> <span class="n">vis</span><span class="o">=</span><span class="s1">&#39;/Volumes/D1/raw/AC974/pt5/AC974.sb3282289.eb3372706.55603.30302575231.ms&#39;</span><span class="p">,</span> <span class="n">outputvis</span><span class="o">=</span><span class="s1">&#39;AC974.119211.ms&#39;</span><span class="p">,</span> <span class="n">createmms</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">separationaxis</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">numsubms</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">tileshape</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">field</span><span class="o">=</span><span class="s1">&#39;GN20cluster&#39;</span><span class="p">,</span> <span class="n">spw</span><span class="o">=</span><span class="s1">&#39;2,3&#39;</span><span class="p">,</span> <span class="n">scan</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">antenna</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">correlation</span><span class="o">=</span><span class="s1">&#39;RR,LL&#39;</span><span class="p">,</span> <span class="n">timerange</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">array</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">uvrange</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">observation</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">feed</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">datacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="n">realmodelcol</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">keepflags</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">usewtspectrum</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">combinespws</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">chanaverage</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">chanbin</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">hanning</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">regridms</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;channel&#39;</span><span class="p">,</span> <span class="n">nchan</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nspw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="n">phasecenter</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">restfreq</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">outframe</span><span class="o">=</span><span class="s1">&#39;lsrk&#39;</span><span class="p">,</span> <span class="n">veltype</span><span class="o">=</span><span class="s1">&#39;radio&#39;</span><span class="p">,</span> <span class="n">preaverage</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeaverage</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timebin</span><span class="o">=</span><span class="s1">&#39;30s&#39;</span><span class="p">,</span> <span class="n">timespan</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">maxuvwdistance</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">docallib</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">callib</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">douvcontsub</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fitspw</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fitorder</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">want_cont</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">denoising_lib</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nthreads</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">niter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">disableparallel</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ddistart</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">taql</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">monolithic_processing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">reindex</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="n">Combine</span> <span class="n">spws</span> <span class="mi">2</span><span class="p">,</span><span class="mi">3</span> <span class="n">into</span> <span class="n">new</span> <span class="n">output</span> <span class="n">spw</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="n">Parse</span> <span class="n">regridding</span> <span class="n">parameters</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">ParallelDataHelper</span><span class="p">::::</span><span class="n">casa</span>      <span class="n">Parse</span> <span class="n">time</span> <span class="n">averaging</span> <span class="n">parameters</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Input</span> <span class="n">file</span> <span class="n">name</span> <span class="ow">is</span> <span class="o">/</span><span class="n">Volumes</span><span class="o">/</span><span class="n">D1</span><span class="o">/</span><span class="n">raw</span><span class="o">/</span><span class="n">AC974</span><span class="o">/</span><span class="n">pt5</span><span class="o">/</span><span class="n">AC974</span><span class="o">.</span><span class="n">sb3282289</span><span class="o">.</span><span class="n">eb3372706</span><span class="o">.</span><span class="mf">55603.30302575231</span><span class="o">.</span><span class="n">ms</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Data</span> <span class="n">column</span> <span class="ow">is</span> <span class="n">CORRECTED</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Output</span> <span class="n">file</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">AC974</span><span class="o">.</span><span class="mf">119211.</span><span class="n">ms</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Re</span><span class="o">-</span><span class="n">index</span> <span class="ow">is</span> <span class="n">enabled</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseMsSpecParams</span>   <span class="n">Tile</span> <span class="n">shape</span> <span class="ow">is</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseDataSelParams</span>  <span class="n">field</span> <span class="n">selection</span> <span class="ow">is</span> <span class="n">GN20cluster</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseDataSelParams</span>  <span class="n">spw</span> <span class="n">selection</span> <span class="ow">is</span> <span class="mi">2</span><span class="p">,</span><span class="mi">3</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseDataSelParams</span>  <span class="n">correlation</span> <span class="n">selection</span> <span class="ow">is</span> <span class="n">RR</span><span class="p">,</span><span class="n">LL</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseFreqTransParams</span>        <span class="n">Combine</span> <span class="n">Spectral</span> <span class="n">Windows</span> <span class="ow">is</span> <span class="n">activated</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseRefFrameTransParams</span>    <span class="n">Regrid</span> <span class="n">MS</span> <span class="ow">is</span> <span class="n">activated</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseRefFrameTransParams</span>    <span class="n">Output</span> <span class="n">reference</span> <span class="n">frame</span> <span class="ow">is</span> <span class="n">lsrk</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseRefFrameTransParams</span>    <span class="n">Interpolation</span> <span class="n">method</span> <span class="ow">is</span> <span class="n">linear</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseFreqSpecParams</span> <span class="n">Mode</span> <span class="ow">is</span> <span class="n">channel</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseFreqSpecParams</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">output</span> <span class="n">channels</span> <span class="ow">is</span> <span class="mi">128</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseFreqSpecParams</span> <span class="n">Start</span> <span class="ow">is</span> <span class="mi">1</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseFreqSpecParams</span> <span class="n">Width</span> <span class="ow">is</span> <span class="mi">1</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseRefFrameTransParams</span>    <span class="n">Enabling</span> <span class="n">channel</span> <span class="n">pre</span><span class="o">-</span><span class="n">averaging</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseTimeAvgParams</span>  <span class="n">Time</span> <span class="n">average</span> <span class="ow">is</span> <span class="n">activated</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">parseTimeAvgParams</span>  <span class="n">Time</span> <span class="nb">bin</span> <span class="ow">is</span> <span class="mi">30</span> <span class="n">seconds</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">colCheckInfo</span>        <span class="n">Adding</span> <span class="n">DATA</span> <span class="n">column</span> <span class="n">to</span> <span class="n">output</span> <span class="n">MS</span> <span class="kn">from</span> <span class="nn">input</span> <span class="n">CORRECTED_DATA</span> <span class="n">column</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">initDataSelectionParams</span>     <span class="n">Selected</span> <span class="n">Fields</span> <span class="n">Ids</span> <span class="n">are</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">initDataSelectionParams</span>     <span class="n">Selected</span> <span class="n">SPWs</span> <span class="n">Ids</span> <span class="n">are</span> <span class="n">Axis</span> <span class="n">Lengths</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>  <span class="p">(</span><span class="n">NB</span><span class="p">:</span> <span class="n">Matrix</span> <span class="ow">in</span> <span class="n">Row</span><span class="o">/</span><span class="n">Column</span> <span class="n">order</span><span class="p">)</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">initDataSelectionParams</span><span class="o">+</span>    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">1</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">initDataSelectionParams</span><span class="o">+</span>     <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">initDataSelectionParams</span>     <span class="n">Selected</span> <span class="n">correlations</span> <span class="n">are</span> <span class="p">[[[</span><span class="mi">0</span><span class="p">]</span> <span class="n">to</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">with</span> <span class="n">stride</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">length</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">to</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">with</span> <span class="n">stride</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">length</span> <span class="p">[</span><span class="mi">1</span><span class="p">]]]</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="nb">open</span>        <span class="n">Select</span> <span class="n">data</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">26</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">createOutputMSStructure</span>     <span class="n">Create</span> <span class="n">output</span> <span class="n">MS</span> <span class="n">structure</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">40</span> <span class="n">INFO</span>    <span class="n">MSTransformDataHandler</span><span class="p">::</span><span class="n">makeSelection</span>   <span class="mi">5024217</span> <span class="n">out</span> <span class="n">of</span> <span class="mi">13674750</span> <span class="n">rows</span> <span class="n">are</span> <span class="n">going</span> <span class="n">to</span> <span class="n">be</span> <span class="n">considered</span> <span class="n">due</span> <span class="n">to</span> <span class="n">the</span> <span class="n">selection</span> <span class="n">criteria</span><span class="o">.</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">regridAndCombineSpwSubtable</span> <span class="n">Calculate</span> <span class="n">combined</span> <span class="n">SPW</span> <span class="n">frequencies</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformRegridder</span><span class="p">::</span><span class="n">combineSpwsCore</span>   <span class="n">Input</span> <span class="n">SPWs</span> <span class="nb">sorted</span> <span class="n">by</span> <span class="n">first</span> <span class="p">(</span><span class="n">lowest</span><span class="p">)</span> <span class="n">channel</span> <span class="n">frequency</span><span class="p">:</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformRegridder</span><span class="p">::</span><span class="n">combineSpwsCore</span>      <span class="n">SPW</span>   <span class="mi">0</span><span class="p">:</span>    <span class="mi">64</span> <span class="n">channels</span><span class="p">,</span> <span class="n">first</span> <span class="n">channel</span> <span class="o">=</span> <span class="mf">4.553300000e+10</span> <span class="n">Hz</span><span class="p">,</span> <span class="n">last</span> <span class="n">channel</span> <span class="o">=</span> <span class="mf">4.565900000e+10</span> <span class="n">Hz</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformRegridder</span><span class="p">::</span><span class="n">combineSpwsCore</span>      <span class="n">SPW</span>   <span class="mi">1</span><span class="p">:</span>    <span class="mi">64</span> <span class="n">channels</span><span class="p">,</span> <span class="n">first</span> <span class="n">channel</span> <span class="o">=</span> <span class="mf">4.565100000e+10</span> <span class="n">Hz</span><span class="p">,</span> <span class="n">last</span> <span class="n">channel</span> <span class="o">=</span> <span class="mf">4.577700000e+10</span> <span class="n">Hz</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">regridSpwAux</span>        <span class="n">Combined</span> <span class="n">SPW</span><span class="p">:</span>   <span class="mi">123</span> <span class="n">channels</span><span class="p">,</span> <span class="n">first</span> <span class="n">channel</span> <span class="o">=</span> <span class="mf">4.553300000e+10</span> <span class="n">Hz</span><span class="p">,</span> <span class="n">last</span> <span class="n">channel</span> <span class="o">=</span> <span class="mf">4.577700000e+10</span> <span class="n">Hz</span><span class="p">,</span> <span class="n">first</span> <span class="n">width</span> <span class="o">=</span> <span class="mf">2.000000000e+06</span> <span class="n">Hz</span><span class="p">,</span> <span class="n">last</span> <span class="n">width</span> <span class="o">=</span> <span class="mf">2.000000000e+06</span> <span class="n">Hz</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">regridSpwAux</span>        <span class="n">Calculate</span> <span class="n">frequencies</span> <span class="ow">in</span> <span class="n">output</span> <span class="n">reference</span> <span class="n">frame</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformRegridder</span><span class="p">::</span><span class="n">calcChanFreqs</span>      <span class="n">Channels</span> <span class="n">equidistant</span> <span class="ow">in</span> <span class="n">freq</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformRegridder</span><span class="p">::</span><span class="n">calcChanFreqs</span><span class="o">+</span>     <span class="n">Central</span> <span class="n">frequency</span> <span class="p">(</span><span class="ow">in</span> <span class="n">output</span> <span class="n">frame</span><span class="p">)</span> <span class="o">=</span> <span class="mf">4.56602e+10</span> <span class="n">Hz</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformRegridder</span><span class="p">::</span><span class="n">calcChanFreqs</span><span class="o">+</span>     <span class="n">Width</span> <span class="n">of</span> <span class="n">central</span> <span class="n">channel</span> <span class="p">(</span><span class="ow">in</span> <span class="n">output</span> <span class="n">frame</span><span class="p">)</span> <span class="o">=</span> <span class="mf">1.99992e+06</span> <span class="n">Hz</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformRegridder</span><span class="p">::</span><span class="n">calcChanFreqs</span><span class="o">+</span>     <span class="n">Number</span> <span class="n">of</span> <span class="n">channels</span> <span class="o">=</span> <span class="mi">128</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformRegridder</span><span class="p">::</span><span class="n">calcChanFreqs</span><span class="o">+</span>     <span class="n">Total</span> <span class="n">width</span> <span class="n">of</span> <span class="n">SPW</span> <span class="p">(</span><span class="ow">in</span> <span class="n">output</span> <span class="n">frame</span><span class="p">)</span> <span class="o">=</span> <span class="mf">2.5599e+08</span> <span class="n">Hz</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformRegridder</span><span class="p">::</span><span class="n">calcChanFreqs</span><span class="o">+</span>     <span class="n">Lower</span> <span class="n">edge</span> <span class="o">=</span> <span class="mf">4.55322e+10</span> <span class="n">Hz</span><span class="p">,</span> <span class="n">upper</span> <span class="n">edge</span> <span class="o">=</span> <span class="mf">4.57882e+10</span> <span class="n">Hz</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">regridSpwAux</span>        <span class="n">Output</span> <span class="n">SPW</span><span class="p">:</span>   <span class="mi">128</span> <span class="n">channels</span><span class="p">,</span> <span class="n">first</span> <span class="n">channel</span> <span class="o">=</span> <span class="mf">4.553317044e+10</span> <span class="n">Hz</span><span class="p">,</span> <span class="n">last</span> <span class="n">channel</span> <span class="o">=</span> <span class="mf">4.578716023e+10</span> <span class="n">Hz</span><span class="p">,</span> <span class="n">first</span> <span class="n">width</span> <span class="o">=</span> <span class="mf">1.999919641e+06</span> <span class="n">Hz</span><span class="p">,</span> <span class="n">last</span> <span class="n">width</span> <span class="o">=</span> <span class="mf">1.999919641e+06</span> <span class="n">Hz</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">regridAndCombineSpwSubtable</span> <span class="n">Write</span> <span class="n">output</span> <span class="n">SPW</span> <span class="n">subtable</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">reindexDDISubTable</span>  <span class="n">Re</span><span class="o">-</span><span class="n">indexing</span> <span class="n">DDI</span> <span class="n">sub</span><span class="o">-</span><span class="n">table</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">reindexSourceSubTable</span>       <span class="n">Re</span><span class="o">-</span><span class="n">indexing</span> <span class="n">SOURCE</span> <span class="n">sub</span><span class="o">-</span><span class="n">table</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">reindexGenericTimeDependentSubTable</span> <span class="n">Re</span><span class="o">-</span><span class="n">indexing</span> <span class="n">SPW</span> <span class="n">column</span> <span class="n">of</span> <span class="n">FEED</span> <span class="n">sub</span><span class="o">-</span><span class="n">table</span> <span class="ow">and</span> <span class="n">removing</span> <span class="n">duplicates</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">reindexGenericTimeDependentSubTable</span> <span class="n">Re</span><span class="o">-</span><span class="n">indexing</span> <span class="n">SPW</span> <span class="n">column</span> <span class="n">of</span> <span class="n">CALDEVICE</span> <span class="n">sub</span><span class="o">-</span><span class="n">table</span> <span class="ow">and</span> <span class="n">removing</span> <span class="n">duplicates</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">59</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">reindexGenericTimeDependentSubTable</span> <span class="n">Re</span><span class="o">-</span><span class="n">indexing</span> <span class="n">SPW</span> <span class="n">column</span> <span class="n">of</span> <span class="n">SYSPOWER</span> <span class="n">sub</span><span class="o">-</span><span class="n">table</span> <span class="ow">and</span> <span class="n">removing</span> <span class="n">duplicates</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">13</span> <span class="n">INFO</span>    <span class="n">MSTransformManager</span><span class="p">::</span><span class="n">setIterationApproach</span>        <span class="n">Combining</span> <span class="n">data</span> <span class="kn">from</span> <span class="nn">selected</span> <span class="n">spectral</span> <span class="n">windows</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">15</span> <span class="n">INFO</span>    <span class="n">ParallelDataHelper</span><span class="p">::::</span><span class="n">casa</span>      <span class="n">Apply</span> <span class="n">the</span> <span class="n">transformations</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">51</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="n">Result</span> <span class="n">mstransform</span><span class="p">:</span> <span class="kc">True</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">51</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="n">Task</span> <span class="n">mstransform</span> <span class="n">complete</span><span class="o">.</span> <span class="n">Start</span> <span class="n">time</span><span class="p">:</span> <span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">15</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mf">25.707882</span> <span class="n">End</span> <span class="n">time</span><span class="p">:</span> <span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">15</span><span class="p">:</span><span class="mi">51</span><span class="p">:</span><span class="mf">43.454363</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">51</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="c1">##### End Task: mstransform          #####</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">21</span><span class="p">:</span><span class="mi">51</span><span class="p">:</span><span class="mi">43</span> <span class="n">INFO</span>    <span class="n">mstransform</span><span class="p">::::</span><span class="n">casa</span>     <span class="c1">##########################################</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>checkchflag(&#39;bb.ms&#39;)
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="demo_gn20_imaging.html" class="btn btn-neutral float-right" title="Import some convinient functions from rxutils" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../par_def.html" class="btn btn-neutral float-left" title="Input File Format" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Rui Xue

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>