

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Parameter File Format &mdash; ism3d 0.3.dev1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Keywords" href="keywords.html" />
    <link rel="prev" title="History" href="../history.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ism3d
          

          
          </a>

          
            
            
              <div class="version">
                0.3.dev1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History</a></li>
</ul>
<p class="caption"><span class="caption-text">Technical Specification/Notes</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Parameter File Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basics">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interpreter">Interpreter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#datatype-expression-support">DataType/Expression Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#section-keyword-reference">Section/Keyword Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#section-types">Section Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#source-model-type-disk3d-or-type-apmodel">Source Model (type=’disk3d’ or type=’apmodel’)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dynamical-model-type-potential">Dynamical Model (type=’potential’)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lense-model-type-lens">Lense Model (type=’lens’)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#database-type-data">Database (type=’data’)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workflow-management-with-reserved-section-names">Workflow Management with Reserved Section Names</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#keyword-value">Keyword-Value</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="keywords.html">Keywords</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develop/background.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/goals.html">Design Goals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/ack.html">Acknowledgement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/seealso.html">See also</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/dictionary.html">ISM3D Dictionary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/callgraph.html">ISM3D call graph</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials: Direct API Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/demo_api_uvhelper.html">ism3d.uvhelper: visibility imaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/demo_api_arts.html">ism3d.arts: model artificial sources in different shapes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/demo_api_lens.html">ism3d.arts.lens: model artificial sources with gravitational lensing effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/demo_api_maskmoment.html">ism3d.xyhelper.maskmoment: derive moment0/moment1 maps from spectral cubes</a></li>
</ul>
<p class="caption"><span class="caption-text">Benchmarking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../benchmark/demo_invert_ft.html">Invert</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tests/test_uvsample_performance.html">Test the performance of the Image-to-MS-related modules</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials: Modeling</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../demos/demo_bx610_b4c2_uv_ab.html">Example BX610: perform model fitting using method=‘amoeba’ for the Band 4 Cycle 2 DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demos/demo_bx610_b4c5_uv_ab.html">Example BX610: perform model fitting using method=‘amoeba’ for the Band 4 Cycle 5 DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demos/demo_bx610_b6c3_uv_ab.html">Example BX610: perform model fitting using method=‘amoeba’ for the Band 6 Cycle 3 DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demos/demo_bx610_model_1dspec.html">Invert Visibility + Plot 1D spectra (may take a while)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demos/demo_bx610_emcee.html">Example BX610: perform model fitting using method=‘emcee’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demos/demo_hxmm01_simulate.html">Example HXMM01: test the MS-simulation modules</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials: misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/demo_notebook.html">Tutorials &amp; Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials: Data Preparation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../demos/demo_gn20_prep.html">Example: GN20 (z~4 SMF) : Data Prep</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demos/demo_bx610_prep.html">Example: BX610 (High-z SFG) : Data Prep</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demos/demo_hxmm01_prep.html">Example: HXMM01 (High-z Merger)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demos/demo_gn20_imaging.html">Example GN20: perform imaging of CO 2-1 dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demos/demo_bx610_imaging.html">Example: BX610 (High-z SFG) : Data Imaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/demo_notebook.html">Tutorials &amp; Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/ism3d.html">ism3d</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ism3d</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Parameter File Format</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="parameter-file-format">
<h1>Parameter File Format<a class="headerlink" href="#parameter-file-format" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basics">
<h2>Basics<a class="headerlink" href="#basics" title="Permalink to this headline">¶</a></h2>
<p>The syntax of <strong>ism3d</strong> input parameter files (.inp or .ini) strictly follows the <a class="reference external" href="https://en.wikipedia.org/wiki/INI_file">INI</a> format, which can be easily parsed by the built-in Python module <a class="reference external" href="https://docs.python.org/3/library/configparser.html">configparser</a>.
The choice was made after a comparison among several readable plain-text syntaxes options (e.g., json/yaml/xml/TOML), mainly due to the simplifcity and wide support from many other languages for the <a class="reference external" href="https://en.wikipedia.org/wiki/INI_file">INI</a> format.
It’s also very readable and easy to write, much less verbose than other syntaxs, and support inline comments (starting with “#”).
Foundamentally, the file content is always divided into <strong>sections</strong>, each of which contains keys with values.</p>
<p>However, <a class="reference external" href="https://en.wikipedia.org/wiki/INI_file">INI</a> is not designed as a data interchange format (not strongly typed), and <a class="reference external" href="https://docs.python.org/3/library/configparser.html">configparser</a> natively do not guess datatypes of values and always storing them internally as string,
<a class="reference external" href="https://en.wikipedia.org/wiki/INI_file">INI</a> files are also typically limited to two levels and doesn’t support arbitary nesting.
To support more advantages features need for our purpose, we build an under-layer interpreter to further convert the string-based input values into datatype-sensitive nested dictionary using <a class="reference external" href="https://newville.github.io/asteval">ASTEVAL</a>.
This nested dictionary not only specifiy individual source models, but also contain the metadata of observed data and control model rendering and fitting workflows.
Here, we describe some useful features built-in the parameter file intepreter and how to use sections to manage modeling workflows.</p>
</div>
<div class="section" id="interpreter">
<h2>Interpreter<a class="headerlink" href="#interpreter" title="Permalink to this headline">¶</a></h2>
<div class="section" id="datatype-expression-support">
<h3>DataType/Expression Support<a class="headerlink" href="#datatype-expression-support" title="Permalink to this headline">¶</a></h3>
<p>All values associated with individual keys will be evaluated by <a class="reference external" href="https://newville.github.io/asteval">ASTEVAL</a>, which treats strings as mathematical expressions and statements (an alterantive to <a class="reference external" href="https://docs.python.org/3/library/ast.html#ast.literal_eval">ast.literal_eval()</a> or the built-in “evil” <a class="reference external" href="https://docs.python.org/3/library/functions.html#eval">eval()</a>).
Therefore, all values specified within parameter files should be written as Python literals（e.g., string representations of Python objects). They are evaluated and mapped into desired data types (see the example below).
Beside the default built-in Python datatypes, we also include some objects from astropy (e.g., <code class="docutils literal notranslate"><span class="pre">astropy.units</span></code> and <code class="docutils literal notranslate"><span class="pre">astropy.coordinates.SkyCoord</span></code>).
Specifcailly, we add the following notation into the <a class="reference external" href="https://newville.github.io/asteval">ASTEVAL</a> symtable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">u</span>           <span class="p">:</span> <span class="n">astropy</span><span class="o">.</span><span class="n">units</span>
<span class="n">Angle</span>       <span class="p">:</span> <span class="n">astropy</span><span class="o">.</span><span class="n">coordiante</span><span class="o">.</span><span class="n">Angle</span>
<span class="n">Quantity</span>    <span class="p">:</span> <span class="n">astropy</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">quantity</span>
<span class="n">SkyCoord</span>    <span class="p">:</span> <span class="n">astropy</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">SkyCoord</span>
<span class="n">np</span>          <span class="p">:</span> <span class="n">numpy</span>
</pre></div>
</div>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[disk1]</span>
<span class="na">type</span>          <span class="o">=</span>      <span class="s">&#39;disk3d&#39;</span>
<span class="na">import</span>        <span class="o">=</span>      <span class="s">&#39;basics&#39;</span>
<span class="na">z</span>           <span class="o">=</span>        <span class="s">4.06</span>
<span class="na">xypos</span>       <span class="o">=</span>        <span class="s">SkyCoord(ra=0,dec=0,unit=&quot;deg&quot;)</span>
<span class="na">contflux</span>     <span class="o">=</span>       <span class="s">(0.00001 * u.Unit(&#39;Jy&#39;),20* u.Unit(&#39;GHz&#39;),1.0)</span>
<span class="na">pa</span>          <span class="o">=</span>        <span class="s">(70+90)*u.deg</span>
<span class="na">inc</span>         <span class="o">=</span>        <span class="s">60.00*u.deg</span>
<span class="na">sbProf</span>       <span class="o">=</span>       <span class="s">(&#39;norm2d&#39;,40*u.kpc)</span>
</pre></div>
</div>
<p>While <a class="reference external" href="https://newville.github.io/asteval">ASTEVAL</a> generally determines the value content and type, we note that the converted datatypes for some individual parameters will further passed through further parsing and converted into restricted object types.
For example, <code class="docutils literal notranslate"><span class="pre">xypos</span></code> will be saved as a SkyCoord object although it can be written as a two-element tuple, a string, or a litereal expression of SkyCoord.</p>
<p>In addition, the built-in interpreter in <code class="docutils literal notranslate"><span class="pre">ism3d</span></code> will check parsed datatype with the expected datatype of each keyword, and provide warning when unexpected values are detected (e.g. the position angle keyword <code class="docutils literal notranslate"><span class="pre">pa</span></code> should not be a string).</p>
<p>The datatype-sensitive extension from traditional <a class="reference external" href="https://en.wikipedia.org/wiki/INI_file">INI</a> files is similar to the design built in the <a class="reference external" href="https://en.wikipedia.org/wiki/TOML">TOML</a> format and its parsers.
However, we decide to use a custome interpreter to not only handle basic datatype, but also support advanced datatypes and literal mathematical expression. The built-in interpreter will decide and check on value datatype expected for individual keywords (as the <code class="docutils literal notranslate"><span class="pre">xypos</span></code> example above)</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[object1]</span>
<span class="na">...</span>
<span class="na">xypos</span>       <span class="o">=</span>        <span class="s">SkyCoord(ra=0,dec=0,unit=&quot;deg&quot;)    # option 1</span>
<span class="na">xypos</span>       <span class="o">=</span>        <span class="s">&#39;23h46m09.4373s +12d49m19.2479s&#39;   # option 2</span>
<span class="na">xypos</span>       <span class="o">=</span>        <span class="s">(189.2933333-1*40/3600,62.3711111+1*15/3600)  # option 3</span>
<span class="na">...</span>
</pre></div>
</div>
<p>If the first ASTEVAL evaluation fails, the program will:</p>
<blockquote>
<div><p>do split() -&gt; re-evaluate on each element -&gt; assemble the results into a list -&gt; assign the list to the keyword
This feature is only designed to work a backend solution for some special paramater input files</p>
</div></blockquote>
<p>The data/output file paths are specified in relative to the working directory (where you lunch GMaKE, either using CLI or a Python script).
To clear up any confusion, absolute paths can also be used.</p>
</div>
<div class="section" id="section-keyword-reference">
<h3>Section/Keyword Reference<a class="headerlink" href="#section-keyword-reference" title="Permalink to this headline">¶</a></h3>
<p>The keywords from one section will not inference keywords from another section with a different section name.
In another word, a keyword will only reside within a section (or local)</p>
<p>Section referencing is introduced to link the parameters from one section (with dedicated purposes) to one keyword of another section.
For example, we can link a section describing gravitional potential to the rotation curve of a disk model (see <code class="docutils literal notranslate"><span class="pre">basics.rcProf</span></code>):</p>
<blockquote>
<div><p>rcProf         =      (‘potential’,’pots’)</p>
</div></blockquote>
<p>Another important application of section referencing is sharing common parameters between different sections.
Specifcailly, a set of keyword which can be “imported” into another input section using the syntax <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">=</span> <span class="pre">'section_name'</span></code>
Then a group of parameters can be shared across several sections of different purpose
For example, if two emission lines arised from the same thin-disk galaxy geometry but with different spatial distribution in the disk plane,
we can write the parameters describing disk geometry into one paramater section and only reference them from other two sections actually specifiying line models. This will simplying model fitting and reduce redudent paramater requirements (see <code class="docutils literal notranslate"><span class="pre">co43.import</span></code> and <code class="docutils literal notranslate"><span class="pre">ci10.import</span></code>):</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">import</span>             <span class="o">=</span>  <span class="s">&#39;basics&#39;</span>
</pre></div>
</div>
<p>Note that the place where this line is will be important as inp2mod will overwrite existing keywords by design</p>
<p>Keyword referencing can be used to “tie” different parameters within a section or even across differen section. In the example below, <code class="docutils literal notranslate"><span class="pre">ci10.lineflux</span></code> is set to a third of the value of <code class="docutils literal notranslate"><span class="pre">co43.lineflux</span></code> as:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">lineflux</span>           <span class="o">=</span>  <span class="s">co43[&#39;lineflux&#39;]/3</span>
</pre></div>
</div>
<p>In general, ‘A[b]’, “b&#64;A”, or “${A:b}” is interpreted as the value of the keyword “b” from Section “A”.
Value slicing is supported, as ‘A[b][2]’, “b[2]&#64;A”, or “${A:b}[2]” is interpreted as the third element of the “b” value from Section “A”.
e.g. “pa&#64;co21disk” = the position angle of the components named “co21disk”
This capability is similar to the function of <a class="reference external" href="https://docs.python.org/3/library/configparser.html#configparser.ExtendedInterpolation">configparser.ExtendedInterpolation</a>.
More advanced mathmetical expressions and keyword reference can be combiend together, for example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">px</span> <span class="o">=</span> <span class="s">2.0*(py@objz)</span>
<span class="na">px</span> <span class="o">=</span> <span class="s">sqrt(2*(py@objz))</span>
</pre></div>
</div>
<p>as long as it follows the correct referening syntax and the expression can be understood by <a class="reference external" href="https://newville.github.io/asteval">ASTEVAL</a>.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[basics]</span>
<span class="na">object</span>         <span class="o">=</span>    <span class="s">&#39;bx610&#39;</span>
<span class="na">z</span>              <span class="o">=</span>    <span class="s">2.21</span>
<span class="na">pa</span>             <span class="o">=</span>    <span class="s">-54.22660862671279 * u.Unit(&#39;deg&#39;)</span>
<span class="na">inc</span>            <span class="o">=</span>    <span class="s">46.24786218695453 * u.Unit(&#39;deg&#39;)</span>
<span class="na">xypos</span>          <span class="o">=</span>    <span class="s">&#39;23h46m09.4373s +12d49m19.2479s&#39; # or SkyCoord(&#39;23h46m09.4373s +12d49m19.2479s&#39;,frame=&#39;icrs&#39;)</span>
<span class="na">vsys</span>           <span class="o">=</span>      <span class="s">104 * u.Unit(&#39;km / s&#39;)</span>
<span class="na">rcProf</span>         <span class="o">=</span>      <span class="s">(&#39;potential&#39;,&#39;pots&#39;)</span>
<span class="na">vSigma</span>         <span class="o">=</span>        <span class="s">50.430210605487204 * u.Unit(&#39;km / s&#39;)</span>
<span class="na">vrot_rpcorr</span>    <span class="o">=</span>      <span class="s">True</span>

<span class="k">[pots]</span>
<span class="na">type</span>           <span class="o">=</span>      <span class="s">&#39;potential&#39;</span>
<span class="na">import</span>         <span class="o">=</span>      <span class="s">&#39;basics&#39;</span>
<span class="na">expdisk</span>        <span class="o">=</span>      <span class="s">(1000.2938616145047 * u.Unit(&#39;solMass / pc2&#39;),3.5 * u.Unit(&#39;kpc&#39;))</span>
<span class="na">dexpdisk</span>       <span class="o">=</span>       <span class="s">(10 * u.Unit(&#39;solMass / pc3&#39;),3.5 * u.Unit(&#39;kpc&#39;),0.5 * u.Unit(&#39;kpc&#39;))</span>
<span class="na">nm3expdisk</span>     <span class="o">=</span>       <span class="s">(10 * u.Unit(&#39;solMass / pc3&#39;),3.5 * u.Unit(&#39;kpc&#39;),0.5 * u.Unit(&#39;kpc&#39;),True)</span>
<span class="na">nfw</span>            <span class="o">=</span>      <span class="s">(500000000000.0 * u.Unit(&#39;solMass&#39;),2.21)</span>
<span class="na">isochrone</span>      <span class="o">=</span>      <span class="s">(10**10*u.Unit(&#39;solMass&#39;),0.1*u.kpc)</span>
<span class="na">kepler</span>         <span class="o">=</span>       <span class="s">10**10*u.Unit(&#39;solMass&#39;)</span>

<span class="k">[co43]</span>
<span class="na">type</span>               <span class="o">=</span>  <span class="s">&#39;disk3d&#39;</span>
<span class="na">import</span>             <span class="o">=</span>  <span class="s">&#39;basics&#39;</span>
<span class="na">note</span>               <span class="o">=</span>  <span class="s">&#39;CO 4-3 of BX610 in BB2&#39;</span>
<span class="na">vis</span>                <span class="o">=</span>   <span class="s">&#39;../data/bx610/alma/2013.1.00059.S/bb3.ms.pt2&#39;</span>
<span class="na">restfreq</span>           <span class="o">=</span>  <span class="s">461.0407682 * u.Unit(&#39;GHz&#39;)</span>
<span class="na">lineflux</span>           <span class="o">=</span>  <span class="s">1.4 * u.Unit(&#39;Jy km / s&#39;)</span>
<span class="na">sbProf</span>             <span class="o">=</span>  <span class="s">(&#39;sersic2d&#39;,2.0*u.kpc,1)</span>
<span class="na">vbProf</span>             <span class="o">=</span>  <span class="s">(&#39;sech&#39;,0.25*u.kpc)</span>

<span class="k">[ci10]</span>
<span class="na">type</span>               <span class="o">=</span>  <span class="s">&#39;disk3d&#39;</span>
<span class="na">import</span>             <span class="o">=</span>  <span class="s">&#39;basics&#39;</span>
<span class="na">note</span>               <span class="o">=</span>  <span class="s">&#39;CI 1-0 of BX610 in BB2&#39;</span>
<span class="na">vis</span>                <span class="o">=</span>  <span class="s">&#39;../data/bx610/alma/2013.1.00059.S/bb1.ms.pt2&#39;</span>
<span class="na">restfreq</span>           <span class="o">=</span>  <span class="s">492.160651 * u.Unit(&#39;GHz&#39;)</span>
<span class="na">lineflux</span>           <span class="o">=</span>  <span class="s">co43[&#39;lineflux&#39;]/3</span>
<span class="na">sbProf</span>             <span class="o">=</span>  <span class="s">(&#39;sersic2d&#39;,3.0*u.kpc,1)</span>
<span class="na">vbProf</span>             <span class="o">=</span>  <span class="s">(&#39;sech&#39;,0.5*u.kpc)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="section-types">
<h2>Section Types<a class="headerlink" href="#section-types" title="Permalink to this headline">¶</a></h2>
<p>As any <a class="reference external" href="https://en.wikipedia.org/wiki/INI_file">INI</a> configuration file, the basic strcuture of <strong>ism3d</strong> parameter file compose of <strong>sections</strong>.
Related key-value pairs are grouped into arbitarily named sections, names of which appear in square brackets (<code class="docutils literal notranslate"><span class="pre">[</span></code> and <code class="docutils literal notranslate"><span class="pre">]</span></code>).</p>
<p>Each section usually describes one specific aspect of parameterized models or provides controls on planned workflow tasks, i.e.  Source Specifications, Modeling Workflows, MISC.</p>
<p>One named parameter section generally fall into one of the following categories:</p>
<div class="section" id="source-model-type-disk3d-or-type-apmodel">
<h3>Source Model (type=’disk3d’ or type=’apmodel’)<a class="headerlink" href="#source-model-type-disk3d-or-type-apmodel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>A “source-model” section describes the physical properties of a emission component (either line or continuum), with the
section name as its identification. The keyword <code class="docutils literal notranslate"><span class="pre">type</span></code> can be <cite>disk3d</cite> or <cite>apmodel</cite>, which determine how the emission model is constructured and rendered.</p>
</div></blockquote>
</div>
<div class="section" id="dynamical-model-type-potential">
<h3>Dynamical Model (type=’potential’)<a class="headerlink" href="#dynamical-model-type-potential" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>A “dynamics-model” section describes the properties of a dynamical component, and its content will be used to specify kinematic model (e.g. rotational curve, veloccity dispersion) for line emission component(s).
Its section name (or i.d.) is usually referenced in the keyword <cite>rcProf</cite> of “source-model” sections.
By combing a “dynamics-model” model with the prescription of line emission spatial distribution (from a “source-model” section, <code class="docutils literal notranslate"><span class="pre">ism3d</span></code> can construct the representation of a line emission in a spectral cube dimension.</p>
</div></blockquote>
</div>
<div class="section" id="lense-model-type-lens">
<h3>Lense Model (type=’lens’)<a class="headerlink" href="#lense-model-type-lens" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>A “lens-model” section describe the properties of a lensing model betwen the observer and simulated source</p>
</div></blockquote>
</div>
<div class="section" id="database-type-data">
<h3>Database (type=’data’)<a class="headerlink" href="#database-type-data" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>A “database” section specify the metadata of actual or simulated data  which will be used by <code class="docutils literal notranslate"><span class="pre">ism3d</span></code>.
The content can include file paths of FITS image/spectral-cube to be models or MeasurementSet to be fitted, or any ancillary data useful for modelling (PSF images, uncertainty images/cube)</p>
</div></blockquote>
</div>
<div class="section" id="workflow-management-with-reserved-section-names">
<h3>Workflow Management with Reserved Section Names<a class="headerlink" href="#workflow-management-with-reserved-section-names" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Several section names are resevered for workflow managment (especially useful for the CLI interface)</p>
<p><code class="docutils literal notranslate"><span class="pre">[ism3d.optimize]</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">ism3d.optimize</span></code> section specify how the program performs parameter optimization (i.e. model fitting)</p>
<p><code class="docutils literal notranslate"><span class="pre">[ism3d.analyze]</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">ism3d.analyze</span></code> section control how the program runs diagnostics analysis and plotting from modelling results.</p>
<p><code class="docutils literal notranslate"><span class="pre">[ism3d.general]</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">ism3d.general</span></code> section provide general configuration information for <code class="docutils literal notranslate"><span class="pre">ism3d</span></code> (e.g., specifying the location of output files or working folders)</p>
</div></blockquote>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1">##########################################################################################</span>
<span class="na">[disk1] # specifications of disk1</span>
<span class="c1">##########################################################################################</span>

<span class="na">type</span>          <span class="o">=</span>      <span class="s">&#39;disk3d&#39;</span>
<span class="na">import</span>        <span class="o">=</span>      <span class="s">&#39;basics&#39;</span>
<span class="na">z</span>           <span class="o">=</span>        <span class="s">4.06</span>
<span class="na">xypos</span>       <span class="o">=</span>        <span class="s">(189.2933333+0*40/3600,62.3711111+1*15/3600)</span>
<span class="na">contflux</span>     <span class="o">=</span>       <span class="s">(0.00001 * u.Unit(&#39;Jy&#39;),20* u.Unit(&#39;GHz&#39;),8.0)</span>
<span class="na">pa</span>          <span class="o">=</span>        <span class="s">70.00*u.deg</span>
<span class="na">inc</span>         <span class="o">=</span>        <span class="s">60.00*u.deg</span>
<span class="na">sbProf</span>       <span class="o">=</span>       <span class="s">(&#39;norm2d&#39;,40*u.kpc)</span>

<span class="c1">###########################################################################################</span>
<span class="na">[disk2] # specifications of disk2 (eqvauilent to disk1, despite different rendering option</span>
<span class="c1">###########################################################################################</span>

<span class="na">type</span>          <span class="o">=</span>       <span class="s">&#39;apmodel&#39;</span>
<span class="na">z</span>            <span class="o">=</span>       <span class="s">4.0548</span>
<span class="na">xypos</span>        <span class="o">=</span>       <span class="s">(189.2933333+0*40/3600,62.3711111+0*15/3600)</span>
<span class="na">contflux</span>     <span class="o">=</span>       <span class="s">(0.001 * u.Unit(&#39;Jy&#39;),46 * u.Unit(&#39;GHz&#39;),3.0)</span>
<span class="na">sbProf</span>       <span class="o">=</span>       <span class="s">(&#39;Gaussian2D&#39;,40*u.kpc,20*u.kpc,70*u.deg)</span>

<span class="c1">##########################################################################################</span>
<span class="na">[sie1] # lense model</span>
<span class="c1">##########################################################################################</span>

<span class="na">type</span>        <span class="o">=</span> <span class="s">&#39;lens&#39;</span>
<span class="na">xypos</span>       <span class="o">=</span>        <span class="s">&#39;12h37m11.89s +62d22m11.8s&#39;</span>
<span class="na">lsProf</span>      <span class="o">=</span>  <span class="s">(&#39;sie&#39;,10*u.arcsec,0.5,70*u.deg)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="keyword-value">
<h2>Keyword-Value<a class="headerlink" href="#keyword-value" title="Permalink to this headline">¶</a></h2>
<p>We provide a detailed table of all available keywords for different section types (see above)</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="keywords.html" class="btn btn-neutral float-right" title="Keywords" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../history.html" class="btn btn-neutral float-left" title="History" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Rui Xue

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>